<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html>
    <head>
        <title>Spring Boot BackEnd</title>
             
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
  
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.1/css/all.css" integrity="sha384-/frq1SRXYH/bSyou/HUp/hib7RVN1TawQYja658FEOodR/FQBKVqT9Ol+Oz3Olq5" crossorigin="anonymous"/>
     <script defer src="https://use.fontawesome.com/releases/v6.1.1/js/all.js" integrity="sha384-xBXmu0dk1bEoiwd71wOonQLyH+VpgR1XcDH3rtxrLww5ajNTuMvBdL5SOiFZnNdp" crossorigin="anonymous"></script>
     <link rel="stylesheet" type="text/css" href="static/styles/view.css" th:href="@{/styles/view.css}" >
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- DATA TABLE -->
	<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css">	
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">
          <link rel="stylesheet" type="text/css" href="static/styles/donus.css" th:href="@{/styles/donus.css}" >
       <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
          <script src="static/js/donust.js" th:src="@{/js/donust.js}"></script> 
           <!--<script src="static/js/jwtverify/verify.js" th:src="@{/js/jwtverify/verify.js}"></script>-->
   
           
           <script>
             // var inter=  setInterval(() => {this.tokenVal();},10000)
     //  console.log(parseJwt(localStorage.getItem('au_token')).exp);
  function parseJwt (token) {
    var base64Url = token.split('.')[1];
    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));

    return JSON.parse(jsonPayload);
};
              // if(document.querySelector("contenido")!== null){
                    
                //}
     // window.addEventListener("mousemove", event => {
    //  console.log(`I am detecting mousemove at ${event.pageX}, ${event.pageY} on Document!`);
    //});
    let pepe="";
     let intpepe="";
     let ct=0;
     let elm=0;
      let otro=0;
      let lenghu=0;
    /* document.addEventListener("keypress",e=>{
        console.log(` ${e.code}`); 
     });*/
  /* window.addEventListener('keydown',e=>{
         console.log(e.keyCode)//27;
       
   });*/
  window.addEventListener("mouseover", event => {
   // window.addEventListener("dblclick", event => {
    //    if(document.getElementById("id1")!==null){
    //document.getElementById("id1").addEventListener("click",event=>{ 
        //console.log("toquea");

   // } );}
   let ahu=0;
   if (document.getElementById("idedu1")!==null){
       
         for(let i=1;i<=(document.getElementsByTagName("td").length+9);i++){
              for(let b=1;b<=(document.getElementsByTagName("td").length+9);b++){
                  
                   if(document.getElementById("inpt"+i)!==null){  
        document.getElementById("inpt"+i).addEventListener('keydown',e=>{
            let cod = e.keyCode || e.switch;
            if(cod===9){
                downk(b,i);
            }
            if(cod===27){
                                     let d,f,g,h,j,k,l,m,dd,ff,kk,ll,mm,ag,agga,divic;
                 for (let a=1;a <= (document.getElementsByTagName("td").length+8);a++){
                                  
                                    if(document.getElementById("td"+b+"p"+a) !==null){
                                      // console.log(document.getElementsByTagName("td")[a].innerHTML);
                                     // for(let c=0;c<document.getElementsByTagName("td").length;c++){
                                      
                                         
                                         id =document.getElementById("th2"+b).innerHTML;
                                        //console.log("ID"+id);
                                        if(a===i){
                                            localStorage.setItem("lap",b);
                                            localStorage.setItem("lali",i);
                                            console.log("di enter" +i);
                                         let multi=parseInt(localStorage.getItem("lap"))*10;
                                   d=b;
                                  f=multi-8;
                                  d=b;
                                  
                                  g=d+1;
                                  h=g+1;
                                  j=h+1;
                                  k=f+1;
                                  l=k+1;
                                  m=l+1;
                                  dd=m+1;
                                  ff=dd+1;
                                  kk=ff+1;
                                  ll=kk+1;
                                  mm=ll+1;
                                 
                                // console.log(document.getElementById("inpt"+i).value);
                                
                                
                                 if(document.getElementById("inpt"+i)!==null){
                                     document.getElementById("td"+d+"p"+i).innerHTML= document.getElementById("inpt"+i).value;
                                      while(document.getElementsByTagName("input").lenght){
                                        document.getElementsByTagName("input")[0].parentNode.removeChild(document.getElementsByTagName("input")[0]);
                                    }
                                 
                                 }
                                return;
                               
                               
                                        } 
                                   }
                                }
            }
            //console.log(e.keyCode);
            if(e.key==='Enter'){
                // console.log("di enter" +i);
                // console.log(document.getElementsByTagName("td").length+8);
                                      let d,f,g,h,j,k,l,m,dd,ff,kk,ll,mm,ag,agga,divic;
                 for (let a=1;a <= (document.getElementsByTagName("td").length+8);a++){
                                  
                                    if(document.getElementById("td"+b+"p"+a) !==null){
                                      // console.log(document.getElementsByTagName("td")[a].innerHTML);
                                     // for(let c=0;c<document.getElementsByTagName("td").length;c++){
                                      
                                         
                                         id =document.getElementById("th2"+b).innerHTML;
                                        //console.log("ID"+id);
                                        if(a===i){
                                            localStorage.setItem("lap",b);
                                            localStorage.setItem("lali",i);
                                            console.log("di enter" +i);
                                         let multi=parseInt(localStorage.getItem("lap"))*10;
                                   d=b;
                                  f=multi-8;
                                  d=b;
                                  
                                  g=d+1;
                                  h=g+1;
                                  j=h+1;
                                  k=f+1;
                                  l=k+1;
                                  m=l+1;
                                  dd=m+1;
                                  ff=dd+1;
                                  kk=ff+1;
                                  ll=kk+1;
                                  mm=ll+1;
                                 
                                // console.log(document.getElementById("inpt"+i).value);
                                
                                if(localStorage.getItem("agregar")===null){
                                    if(document.getElementById("inpt"+i)!==null){
                                     document.getElementById("td"+d+"p"+i).innerHTML= document.getElementById("inpt"+i).value;
                                      while(document.getElementsByTagName("input").lenght){
                                        document.getElementsByTagName("input")[0].parentNode.removeChild(document.getElementsByTagName("input")[0]);
                                    }
                                  EditEdu(d,f,k,l,m,dd,ff,kk,ll,mm);
                                 }
                                return;
                                }
                                 if(document.getElementById("inpt"+i)!==null){
                                     document.getElementById("td"+d+"p"+i).innerHTML= document.getElementById("inpt"+i).value;
                                      while(document.getElementsByTagName("input").lenght){
                                        document.getElementsByTagName("input")[0].parentNode.removeChild(document.getElementsByTagName("input")[0]);
                                    }
                                  EditEdu(d,f,k,l,m,dd,ff,kk,ll,mm);
                                 }
                                return;
                               
                                   return;
                                        } 
                                   }
                                }
                
            }    
            
        });
         
            }    
           
       
    
        
                   if(document.getElementById("th"+b+""+i) !==null){
                
               document.getElementById("th"+b+""+i).addEventListener("mousemove",event=>{
                   elm +=1;
                   if(document.getElementById("th"+b+""+i).innerHTML==="id"){
                       return;
                   }
                   if(document.getElementById("thh"+b+""+i)!==null){
                   localStorage.setItem("tdp",document.getElementById("thh"+b+""+i).innerHTML);
                    }
                   let divi=document.getElementsByTagName("td").length/9;
                 
                   if (i===divi){
                       if(document.getElementById("add")!==null){
                           document.getElementById("add").remove();
                       }
                        const faicon= document.createElement("i");
                        faicon.setAttribute("class","fa-solid fa-plus");
                        faicon.setAttribute("id","add");
                        faicon.setAttribute("onclick","clickmeEdu("+b+","+i+")")
                        faicon.setAttribute("title","Agregar");
                        faicon.setAttribute("type","button");
                         
                        faicon.setAttribute("style","color:greenyellow;opacity: 0.9");
                   document.getElementById("th"+b+""+i).appendChild(faicon);
                         
                   }
                   if(elm<=1){
                       
                      if(document.getElementById("elim")!==null){
                   
                   document.getElementById("elim").remove();
                    
                        }
                        if(document.getElementById("add")!==null){
                            document.getElementById("add").remove();
                        }
                      
                   const faicon= document.createElement("i");
                   faicon.setAttribute("class","fa-solid fa-trash-can");
                   faicon.setAttribute("id","elim");
                   faicon.setAttribute("title","Eliminar");
                   faicon.setAttribute("type","button");
                    
                   faicon.setAttribute("style","color:red;opacity: 0.9");
                   document.getElementById("th"+b+""+i).appendChild(faicon);
                   
                      
                    }
                    
                
               });elm=0 ;
               let cu=0;
               
               if(document.getElementById("elim")!==null){
                document.getElementById("elim").addEventListener("click",event=>{
                        console.log("ahuaaaa"+b +" "+i);
                       Swal.fire({
                                title: '¿Seguro de que desea eliminar el Registro?',
                                showDenyButton: true,
                                showCancelButton: true,
                                confirmButtonText: 'Si Eliminar',
                                denyButtonText: `No`,
                              }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                   // console.log("THID"+document.getElementById("th"+b+""+i).innerHTML);
                                   if(document.getElementById("thh"+b+""+i) ===null){
                                       return;
                                   }
                                    let limpiar=localStorage.getItem("tdp");    //document.getElementById("thh"+b+""+i).innerHTML;
                                    
                                    console.log("LIMPIAR"+limpiar);
                                    
                                      fetch('/educacion/borrar/'+limpiar, {
                                                          method: 'DELETE',
                                                            headers: (
                                                          {
                                                            'Content-Type': 'application/json',
                                                            'Authorization': localStorage.getItem('au_token')
                                                          }
                                                         )
                                                         
                                                         // body:{title: 'Angular POST Request Example'}
                                                         // body: JSON.stringify({id: document.getElementById("th"+b+""+i).innerHTML})
                                                              })
                                                             .then(res => res)
                                                             .then(res=> { console.log(res);
                                                                if(res.status ===200){
                                                                    console.log("200");
                                                                     EducReload();
                                                                    Swal.fire('Eliminado!', '', 'success')
                                                                }
                                                               
                                                                 //alert("se borro correctamente");
                                                             });
                                  
                                } else if (result.isDenied) {
                                  Swal.fire('No se Eliminara', '', 'info')
                                }
                              }); 
                    });}
               
                
               
               
                        }
                  if (document.getElementById("td"+b+"p"+i)!==null)  {
                      
                      document.getElementById("td"+b+"p"+i).addEventListener("dblclick", e=>{
                          
                       if(Object.values(document.getElementById("td"+b+"p"+i).innerHTML.toString())[0] !== '<'){
                         pepe=document.getElementById("td"+b+"p"+i).innerHTML.toString();
                        }
                        document.getElementById("td"+b+"p"+i).innerHTML="";
                         //if(localStorage.getItem("td"))
                          
                       let inpt= document.createElement("input");
                       
                        
                       inpt.setAttribute("id","inpt"+i);
                       inpt.setAttribute("type","text");
                       inpt.setAttribute("value",localStorage.getItem("td"));
                        
                       inpt.value=pepe;
                     
                       //document.getElementById("tr21").appendChild(inpt);
                       document.getElementById("td"+b+"p"+i).appendChild(inpt);
                       
                       inpt.addEventListener("keypress",function (e) {
                           if(e.key==="Enter"){
                               
                               if(localStorage.getItem("agregar")!==null){
                                   
                                   
                                     let d,f,g,h,j,k,l,m,dd,ff,kk,ll,mm,ag,agga,divic;
                 for (let a=1;a <= (document.getElementsByTagName("td").length+7);a++){
                                  
                                    if(document.getElementById("td"+b+"p"+a) !==null){
                                      // console.log(document.getElementsByTagName("td")[a].innerHTML);
                                     // for(let c=0;c<document.getElementsByTagName("td").length;c++){
                                      
                                         
                                         id =document.getElementById("th2"+b).innerHTML;
                                        //console.log("ID"+id);
                                        if(a===i){
                                            localStorage.setItem("lap",b);
                                            localStorage.setItem("lali",i);
                                            
                                        varia=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                       
                                         
                                    
                                   }
                                }
                let multi=parseInt(localStorage.getItem("lap"))*10;
                                   d=b;
                                  f=multi-8;
                                  d=b;
                                  
                                  g=d+1;
                                  h=g+1;
                                  j=h+1;
                                  k=f+1;
                                  l=k+1;
                                  m=l+1;
                                  dd=m+1;
                                  ff=dd+1;
                                  kk=ff+1;
                                  ll=kk+1;
                                  mm=ll+1;
                                   console.log("D"+d);
                                 console.log("F"+f);
                                 console.log("K"+k);
                                 console.log("L"+l);
                                 console.log("M"+m);
                                 console.log("DD"+dd);
                                 console.log("ff"+ff);
                                 console.log("kk"+kk);
                                 console.log("ll"+ll);
                                 console.log("mm"+mm);
                                
                                  if(document.getElementById("inpt"+i)!==null){
                                     document.getElementById("td"+d+"p"+i).innerHTML= document.getElementById("inpt"+i).value;
                                      while(document.getElementsByTagName("input").lenght){
                                        document.getElementsByTagName("input")[0].parentNode.removeChild(document.getElementsByTagName("input")[0]);
                                    }
                                  EditEdu(d,f,k,l,m,dd,ff,kk,ll,mm);
                                 }
                                   return;
                                   
                               }
                                document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                                    if(document.getElementById("inpt"+i)!==null){
                                       document.getElementById("inpt"+i).remove();
                                   }
                       let d,f,g,h,j,k,l,m,dd,ff,kk,ll,mm,ag,agga,divic;
                       divic=(document.getElementsByTagName("td").length+5);
                       //console.log("DDD"+divic);
                            ag=b+4;
                            agga=i+4;
                                           
                                                                   
                                  
                                 
                                 for (let a=1;a <= (document.getElementsByTagName("td").length+7);a++){
                                  
                                    if(document.getElementById("td"+b+"p"+a) !==null){
                                      // console.log(document.getElementsByTagName("td")[a].innerHTML);
                                     // for(let c=0;c<document.getElementsByTagName("td").length;c++){
                                      
                                         
                                         id =document.getElementById("th2"+b).innerHTML;
                                        //console.log("ID"+id);
                                        if(a===i){
                                            localStorage.setItem("lap",b);
                                            localStorage.setItem("lali",i);
                                            
                                        varia=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                       
                                         
                                    
                                   }
                                }
                                  let multi=parseInt(localStorage.getItem("lap"))*10;
                                   d=b;
                                  f=multi-8;
                                  d=b;
                                  
                                  g=d+1;
                                  h=g+1;
                                  j=h+1;
                                  k=f+1;
                                  l=k+1;
                                  m=l+1;
                                  dd=m+1;
                                  ff=dd+1;
                                  kk=ff+1;
                                  ll=kk+1;
                                  mm=ll+1;
                                   console.log("D"+d);
                                 console.log("F"+f);
                                 console.log("K"+k);
                                 console.log("L"+l);
                                 console.log("M"+m);
                                 console.log("DD"+dd);
                                 console.log("ff"+ff);
                                 console.log("kk"+kk);
                                 console.log("ll"+ll);
                                 console.log("mm"+mm);
                                
                                  if(document.getElementById("inpt"+i)!==null){
                                     document.getElementById("td"+d+"p"+i).innerHTML= document.getElementById("inpt"+i).value;
                                     console.log("AVERT "+document.getElementById("td"+d+"p"+i).innerHTML) 
                                     return;
                                    while(document.getElementsByTagName("input").lenght){
                                        document.getElementsByTagName("input")[0].parentNode.removeChild(document.getElementsByTagName("input")[0]);
                                    }
                                  EditEdu(d,f,k,l,m,dd,ff,kk,ll,mm);
                                  return;
                                 }
                                
                   
                   
                    
                           }
                           
                       });
                    
                    
                    });
                      
                  }
                   
              }
         }
   }
 if (document.getElementById("idcon1")!==null){
     lenghu=parseInt(localStorage.getItem("posicion"));
     
     for(let i=1;i<=(document.getElementsByTagName("td").length+lenghu);i++){
         
         for(let b=1;b<=(document.getElementsByTagName("td").length+lenghu);b++){
             
             if(document.getElementById("th"+b+""+i) !==null){
                
               document.getElementById("th"+b+""+i).addEventListener("mousemove",event=>{
                   elm +=1;
                   //console.log("B"+b);
                    if(document.getElementById("th"+b+""+i).innerHTML==="id"){
                       return;
                   }
                   if(document.getElementById("thh"+b+""+i)!==null){
                   localStorage.setItem("tdp",document.getElementById("thh"+b+""+i).innerHTML);
                    }
                   let divi=document.getElementsByTagName("td").length/4;
                  // console.log("DIVI"+document.getElementsByTagName("td").length+i);
                   if (i===divi){
                       if(document.getElementById("add")!==null){
                           document.getElementById("add").remove();
                       }
                        const faicon= document.createElement("i");
                        faicon.setAttribute("class","fa-solid fa-plus");
                        faicon.setAttribute("id","add");
                        faicon.setAttribute("onclick","clickmeCn("+i+","+i+")")
                        faicon.setAttribute("title","Agregar");
                        faicon.setAttribute("type","button");
                         
                        faicon.setAttribute("style","color:greenyellow;opacity: 0.9");
                   document.getElementById("th"+b+""+i).appendChild(faicon);
                         
                   }
                   if(elm<=1){
                       
                      if(document.getElementById("elim")!==null){
                         // document.getElementById("th"+b+""+i).innerHTML=localStorage.getItem("th").toString();
                   document.getElementById("elim").remove();
                    
                        }
                        if(document.getElementById("add")!==null){
                            document.getElementById("add").remove();
                        }
                       // localStorage.setItem("th",document.getElementById("th"+b+""+i).innerHTML);
                     // document.getElementById("th"+b+""+i).innerHTML="";  
                   const faicon= document.createElement("i");
                   faicon.setAttribute("class","fa-solid fa-trash-can");
                   faicon.setAttribute("id","elim");
                   faicon.setAttribute("title","Eliminar");
                   faicon.setAttribute("type","button");
                    
                   faicon.setAttribute("style","color:red;opacity: 0.9");
                   document.getElementById("th"+b+""+i).appendChild(faicon);
                   //console.log("estoy en la posicion"+b+" de la lista"+i);
                      
                    }
                    
                  /* setTimeout(function() {
                        document.getElementById("elim").remove();
                      }, 2500);*/
               });elm=0 ;
               let cu=0;
               
               if(document.getElementById("elim")!==null){
                document.getElementById("elim").addEventListener("click",event=>{
                     
                       Swal.fire({
                                title: '¿Seguro de que desea eliminar el Registro?',
                                showDenyButton: true,
                                showCancelButton: true,
                                confirmButtonText: 'Si Eliminar',
                                denyButtonText: `No`,
                              }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                   // console.log("THID"+document.getElementById("th"+b+""+i).innerHTML);
                                   if(document.getElementById("thh"+b+""+i) ===null){
                                       return;
                                   }
                                    let limpiar=localStorage.getItem("tdp");
                                    
                                    //console.log("LIMPIAR"+limpiar);
                                    //return;
                                      fetch('/conoc/borrar/'+limpiar, {
                                                          method: 'DELETE',
                                                            headers: (
                                                          {
                                                            'Content-Type': 'application/json',
                                                            'Authorization': localStorage.getItem('au_token')
                                                          }
                                                         )
                                                         
                                                         // body:{title: 'Angular POST Request Example'}
                                                         // body: JSON.stringify({id: document.getElementById("th"+b+""+i).innerHTML})
                                                              })
                                                             .then(res => res)
                                                             .then(res=> { console.log(res);
                                                                if(res.status ===200){
                                                                    console.log("200");
                                                                    ConocReload();
                                                                    Swal.fire('Eliminado!', '', 'success')
                                                                }
                                                               
                                                                 
                                                             });
                                  
                                } else if (result.isDenied) {
                                  Swal.fire('No se Eliminara', '', 'info')
                                }
                              }); 
                    });}
               
                  
               
                        }
             
             
             if (document.getElementById("td"+b+"p"+i)!==null)  {
                 
                 document.getElementById("td"+b+"p"+i).addEventListener("dblclick", e=>{
                     
                     if(Object.values(document.getElementById("td"+b+"p"+i).innerHTML.toString())[0] !== '<'){
                         pepe=document.getElementById("td"+b+"p"+i).innerHTML.toString();
                        }
                        document.getElementById("td"+b+"p"+i).innerHTML="";
                         //if(localStorage.getItem("td"))
                          
                       let inpt= document.createElement("input");
                       
                        
                       inpt.setAttribute("id","inpt"+i);
                       inpt.setAttribute("type","text");
                       inpt.setAttribute("value",localStorage.getItem("td"));
                        
                       inpt.value=pepe;
                     
                       //document.getElementById("tr21").appendChild(inpt);
                       document.getElementById("td"+b+"p"+i).appendChild(inpt);
                       
                       inpt.addEventListener("keypress",function (e) {
                           if(e.key==="Enter"){
                                document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                                 /*   if(document.getElementById("inpt"+i)!==null){
                                       document.getElementById("inpt"+i).remove();
                                   }*/
                       let edi,sobre,de,saber,personaid,d,f,g,h,j,k,l,m,ag,agga,divic;
                       divic=(document.getElementsByTagName("td").length+5);
                       //console.log("DDD"+divic);
                            ag=b+4;
                            agga=i+4;
                                           
                                  d=b;
                                  f=divic;
                                  d=b;
                                  
                                  g=d+1;
                                  h=g+1;
                                  j=h+1;
                                  k=f+1;
                                  l=k+1;
                                  m=l+1;
                                  console.log("D"+d);
                                 console.log("F"+f);
                                 console.log("K"+k);
                                 console.log("L"+l);
                                 console.log("M"+m);
                                
                    edi=document.getElementById("th2"+d).innerHTML;
                    if(document.getElementById("td"+d+"p"+f)!==null){
                   sobre=document.getElementById("td"+d+"p"+f).innerHTML;
                    }
                    if(document.getElementById("td"+d+"p"+k)!==null){
                   de=document.getElementById("td"+d+"p"+k).innerHTML;
                    }
                    if(document.getElementById("td"+d+"p"+l)!==null){
                   saber=document.getElementById("td"+d+"p"+l).innerHTML;
                    }
                    if(document.getElementById("td"+d+"p"+m)!==null){
                   personaid=document.getElementById("td"+d+"p"+m).innerHTML;
                    }
                   console.log("SAPVEE"+saber);
                   if(saber>0){
                       localStorage.setItem("agregar",'1')
                       if(document.getElementById("ext"+de)===null){
                        const parat=document.createElement("input");
                       parat.setAttribute("id","ext"+de);
                       parat.setAttribute("style","background: #7092f0;");
                       parat.setAttribute("oninput","ValorRanT2("+saber+","+"'"+sobre+"'"+","+"'"+de+"'"+","+b+","+ag+","+agga+")");
                       parat.setAttribute("data-id","ex1RangePicker");
                       parat.setAttribute("type","range");
                       parat.value=saber;
                        document.getElementById("tr2"+d).appendChild(parat);
                        const parats=document.createElement("div");
                       parats.setAttribute("id","demo"+de);
                       parats.innerHTML=saber;
                        document.getElementById("tr2"+d).appendChild(parats);
                         const paras = document.createElement("br");
                        paras.setAttribute("id","br4"+d);
                        document.getElementById("tr2"+d).appendChild(paras);
                         const parass = document.createElement("div");
                        parass.setAttribute("id","div"+d);
                        document.getElementById("tr2"+d).appendChild(parass);
                        Grafico(saber,sobre,de,b);
                        
                         const parasst = document.createElement("input");
                        parasst.setAttribute("id","inpt"+d);
                        parasst.setAttribute("type","button");
                        parasst.setAttribute("class","btn btn-primary");//edi,sobre,de,saber,personaid d,fklm
                        parasst.setAttribute("onclick","Edit2("+d+","+f+","+k+","+l+","+m+")");
                        parasst.value="Aplicar";
                        document.getElementById("div"+d).appendChild(parasst);
                        
                        const para = document.createElement("br");
                        para.setAttribute("id","br4"+d+1);
                        document.getElementById("tr2"+d).appendChild(para);
                    }
                        }   
                           }
                           
                       });
                 });
             }
         }
         
     }
 }
if(document.getElementById("idexp1")!==null){
   lenghu=parseInt(localStorage.getItem("lengh"));
    for(let i=1;i<=(document.getElementsByTagName("td").length+7);i++){
         let resu= document.getElementsByTagName("td").length/parseInt(localStorage.getItem("o"));
               if(i<=resu){
                   ahu=i;
               }    
       for(let b=1;b<=(document.getElementsByTagName("td").length+7);b++){ 
          //console.log(` ${event.keyCode}`);
            //document.getElementById("idexp1").addEventListener("click",event=>{
            
          if(document.getElementById("inpt"+i)!==null){  
        document.getElementById("inpt"+i).addEventListener('keydown',e=>{
            let cod = e.keyCode || e.switch;
            if(cod===9){
                downk(b,i);
            }
            if(cod===27){
                                     let d,f,g,h,j,k,l,m,dd,ff,kk,ll,mm,ag,agga,divic;
                 for (let a=1;a <= (document.getElementsByTagName("td").length+8);a++){
                                  
                                    if(document.getElementById("td"+b+"p"+a) !==null){
                                      // console.log(document.getElementsByTagName("td")[a].innerHTML);
                                     // for(let c=0;c<document.getElementsByTagName("td").length;c++){
                                      
                                         
                                         id =document.getElementById("th2"+b).innerHTML;
                                        //console.log("ID"+id);
                                        if(a===i){
                                            localStorage.setItem("lap",b);
                                            localStorage.setItem("lali",i);
                                            console.log("di enter" +i);
                                         let multi=parseInt(localStorage.getItem("lap"))*8;
                                   d=b;
                                  f=multi-7;
                                  d=b;
                                  
                                  g=d+1;
                                  h=g+1;
                                  j=h+1;
                                  k=f+1;
                                  l=k+1;
                                  m=l+1;
                                  dd=m+1;
                                  ff=dd+1;
                                  kk=ff+1;
                                  ll=kk+1;
                                  mm=ll+1;
                                 
                                // console.log(document.getElementById("inpt"+i).value);
                                
                                
                                 if(document.getElementById("inpt"+i)!==null){
                                     document.getElementById("td"+d+"p"+i).innerHTML= document.getElementById("inpt"+i).value;
                                      while(document.getElementsByTagName("input").lenght){
                                        document.getElementsByTagName("input")[0].parentNode.removeChild(document.getElementsByTagName("input")[0]);
                                    }
                                 
                                 }
                                return;
                               
                               
                                        } 
                                   }
                                }
            }    
            
        });
          document.getElementById("inpt"+i).addEventListener('keypress',e=>{
           
            if(e.key==='Enter'){
                add(b,i);
            }
                
            
        });
       
                    }
   // });
          /* if(document.getElementById("inp"+i)!==null){
                //console.log("LENGTH"+document.getElementsByTagName("td").length +" "+i+" "+b);
             document.getElementById("inp"+i).addEventListener("keypress",function (e) {
                            if (e.key === 'Enter') {
                               // console.log("LENGTH"+document.getElementsByTagName("td").length +" "+i+" "+b);
                                
                               // console.log("enter"+document.getElementsByTagName("td").length);
                              if(localStorage.getItem("add")==="1"){
                                  console.log("LENGTH"+document.getElementsByTagName("td").length +" "+i+" "+b);
                                  let pos=document.getElementsByTagName("td").length/7;
                                  let sumar=7;
                                  for(let p=0;p<document.getElementsByTagName("td").length;p++){
                                      if(p>0){
                                          if (sumar>0){
                                          sumar-=i;
                                      }
                                      console.log("fuera");
                                        if(document.getElementById("inp"+i)!==null){
                                        console.log("dentro");
                                        if(document.getElementById("inp"+i).value !=="Agregar"){  
                                         let po= (document.getElementsByTagName("td").length+5)-sumar;  
                                      let list=po;
                                      console.log("LIST",list);
                                      //return;
                                      document.getElementById("td"+pos+"p"+list).innerHTML=document.getElementById("inp"+i).value;
                                      if (document.getElementById("inp"+i)!==null){
                                        document.getElementById("inp"+i).remove();
                                    }
                                        }
                                    }
                                    }
                                    }
                                  //document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inp"+i).value;
                                  localStorage.removeItem("add");
                                  //alert("ADD")
                                  return;
                              }}});}*/
           
           
           if(document.getElementById("th"+b+""+i) !==null){
                
               document.getElementById("th"+b+""+i).addEventListener("mousemove",event=>{
                   elm +=1;
                   if(document.getElementById("th"+b+""+i).innerHTML==="id"){
                    return;
                }
                   if(document.getElementById("thh"+b+""+i)!==null){
                    localStorage.setItem("tdp",document.getElementById("thh"+b+""+i).innerHTML);
                    }
                    let divi=document.getElementsByTagName("td").length/7;
                  // console.log("DIVI"+document.getElementsByTagName("td").length+i);
                   if (i===divi){
                       if(document.getElementById("add")!==null){
                           document.getElementById("add").remove();
                       }
                        const faicon= document.createElement("i");
                        faicon.setAttribute("class","fa-solid fa-plus");
                        faicon.setAttribute("id","add");
                        faicon.setAttribute("onclick","clickme("+b+","+i+")")
                        faicon.setAttribute("title","Agregar");
                        faicon.setAttribute("type","button");
                         
                        faicon.setAttribute("style","color:greenyellow;opacity: 0.9");
                   document.getElementById("th"+b+""+i).appendChild(faicon);
                         
                   }
                   if(elm<=1){
                       
                      if(document.getElementById("elim")!==null){
                         // document.getElementById("th"+b+""+i).innerHTML=localStorage.getItem("th").toString();
                   document.getElementById("elim").remove();
                    
                        }
                        if(document.getElementById("add")!==null){
                            document.getElementById("add").remove();
                        }
                       // localStorage.setItem("th",document.getElementById("th"+b+""+i).innerHTML);
                     // document.getElementById("th"+b+""+i).innerHTML="";  
                   const faicon= document.createElement("i");
                   faicon.setAttribute("class","fa-solid fa-trash-can");
                   faicon.setAttribute("id","elim");
                   faicon.setAttribute("title","Eliminar");
                   faicon.setAttribute("type","button");
                    
                   faicon.setAttribute("style","color:red;opacity: 0.9");
                   document.getElementById("th"+b+""+i).appendChild(faicon);
                   //console.log("estoy en la posicion"+b+" de la lista"+i);
                      
                    }
                    
                  /* setTimeout(function() {
                        document.getElementById("elim").remove();
                      }, 2500);*/
               });elm=0 ;
               let cu=0;
               
               if(document.getElementById("elim")!==null){
                document.getElementById("elim").addEventListener("click",event=>{
                        
                       Swal.fire({
                                title: '¿Seguro de que desea eliminar el Registro?',
                                showDenyButton: true,
                                showCancelButton: true,
                                confirmButtonText: 'Si Eliminar',
                                denyButtonText: `No`,
                              }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                   // console.log("THID"+document.getElementById("th"+b+""+i).innerHTML);
                                   if(document.getElementById("thh"+b+""+i) ===null){
                                       return;
                                   }
                                    let limpiar=localStorage.getItem("tdp");
                                  
                                      fetch('/experiencia/borrar/'+limpiar, {
                                                          method: 'DELETE',
                                                            headers: (
                                                          {
                                                            'Content-Type': 'application/json',
                                                            'Authorization': localStorage.getItem('au_token')
                                                          }
                                                         )
                                                         
                                                         // body:{title: 'Angular POST Request Example'}
                                                         // body: JSON.stringify({id: document.getElementById("th"+b+""+i).innerHTML})
                                                              })
                                                             .then(res => res)
                                                             .then(res=> { console.log(res);
                                                                if(res.status ===200){
                                                                    console.log("200");
                                                                     ExReload();
                                                                    Swal.fire('Eliminado!', '', 'success')
                                                                }
                                                               
                                                                 //alert("se borro correctamente");
                                                             });
                                  
                                } else if (result.isDenied) {
                                  Swal.fire('No se Eliminara', '', 'info')
                                }
                              }); 
                    });}
               
                  /* if(document.getElementById("elim")!==null){
                   document.getElementById("elim").remove();
                        }*/
               
               
                        }
        if (document.getElementById("td"+b+"p"+i)!==null)  {
            //console.log("LOCAL"+localStorage.getItem("posi"));
          
        
           
           document.getElementById("td"+b+"p"+i).addEventListener("dblclick", event =>{
                
                //console.log("Estoy en la pos"+" "+b+" "+ "de la lista" +" "+i);
                  //console.log("ENTRE DBLCLICK");
                  if(localStorage.getItem('posi')===null){
                  localStorage.setItem("posi",i);
                     }
                  if(localStorage.getItem('cuenta')===null){
                        localStorage.setItem('cuenta','1');
                    }
                  if (localStorage.getItem("posi")!==i){     
                       localStorage.setItem('posi',i);
                        localStorage.setItem('cuenta','1');
                        
                     localStorage.removeItem('td');
                                    if(document.getElementById("inpt"+i)!==null){
                                 
                                  if ( document.getElementById("td"+b+"p"+i)!==null){
                                      let ing=document.getElementById("inpt"+i).value;
                                     
                                        
                                      if(Object.values(ing)[0] !=='<'){
                                    document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                                        if(document.getElementById("inpt"+i)!==null){
                                            document.getElementById("inpt"+i).remove();
                                        }
                                            }
                                        
                                            }
                                   
                                
                            }
                    
                }
                    
                   if(localStorage.getItem('posi')===i.toString()){
                       //console.log("ENTRE A POSI");
                       
                       ct+=1;
                       if(localStorage.getItem('ct')===null){
                       localStorage.setItem('ct',ct);
                        }
                   }
                   let posii=parseInt(localStorage.getItem('ct'));
                   if(posii===1){
                       localStorage.setItem('ct','2');
                       localStorage.setItem('cuenta','1');
                   }
                ct+=parseInt(localStorage.getItem('cuenta'));
                
               // localStorage.setItem('cuenta',ct);
                if(localStorage.getItem('cuenta')==='1'){
             localStorage.setItem('cuenta','2');
                   localStorage.removeItem('ct');
                 
                   //console.log(document.getElementById("th2"+i)+ " "+i);
                         
                        
                        if(Object.values(document.getElementById("td"+b+"p"+i).innerHTML.toString())[0] !== '<'){
                         pepe=document.getElementById("td"+b+"p"+i).innerHTML.toString();
                        }
                        document.getElementById("td"+b+"p"+i).innerHTML="";
                         //if(localStorage.getItem("td"))
                          
                       let inpt= document.createElement("input");
                       
                        
                       inpt.setAttribute("id","inpt"+i);
                       inpt.setAttribute("type","text");
                       inpt.setAttribute("value",localStorage.getItem("td"));
                        
                       inpt.value=pepe;
                     
                       //document.getElementById("tr21").appendChild(inpt);
                       document.getElementById("td"+b+"p"+i).appendChild(inpt);
                       
                       
                       /* document.getElementById("td"+b+"p"+i).addEventListener("keydown",event=>{
                            var code = event.keyCode || event.which;
                           if(code===9){
                               downk(b,i);
                                
                           }*/
                           /*if(document.getElementById("td"+b+"p"+i)===null || document.getElementById("inpt"+i)===null){
                               return;
                           }
                           document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                          localStorage.removeItem('td'); 
                          if(document.getElementById("inpt"+i)!==null){
                           document.getElementById("inpt"+i).remove();
                            }
                           return;*/
                      /* });*/
                       inpt.addEventListener("keypress",function (e) {
                          
                            if (e.key === 'Enter') {
                               // console.log("enter"+document.getElementsByTagName("td").length);
                              if(localStorage.getItem("add")==="1"){
                                  //console.log("LENGTH"+document.getElementsByTagName("td").length +" "+i+" "+b);
                                  let pos=document.getElementsByTagName("td").length/7;
                                  let sumar=7;
                                  
                                      document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                                      if (document.getElementById("inpt"+i)!==null){
                                        document.getElementById("inpt"+i).remove();
                                    }
                                    let id =0;
                                   let nombreEmpresa="";
                                   let estrabajoactual="";
                                   let fechainicio="";
                                   let fechafin="";
                                   let descripcion="";
                                   let persona_id="";
                                   let tipo_empleo_id="";
                                    for (let a=1;a <= (document.getElementsByTagName("td").length+5);a++){
                                 
                                    if(document.getElementById("td"+b+"p"+a) !==null){
                                      // console.log(document.getElementsByTagName("td")[a].innerHTML);
                                     // for(let c=0;c<document.getElementsByTagName("td").length;c++){
                                      
                                       
                                         id =0;
                                        console.log("ID"+id);
                                       
                                       if (nombreEmpresa===""){
                                         nombreEmpresa=document.getElementById("td"+b+"p"+a).innerHTML;
                                       }
                                    if (estrabajoactual==="" || estrabajoactual===nombreEmpresa /*|| estrabajoactual===fechainicio || estrabajoactual===fechafin || descripcion*/){
                                     estrabajoactual=document.getElementById("td"+b+"p"+a).innerHTML;
                                    }   
                                    if (fechainicio==="" || fechainicio===nombreEmpresa || fechainicio===estrabajoactual ){
                                     fechainicio=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                    if (fechafin==="" || fechafin===nombreEmpresa || fechafin===estrabajoactual || fechafin===fechainicio){
                                     fechafin=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                    if (descripcion==="" || descripcion===nombreEmpresa || descripcion===estrabajoactual || descripcion===fechainicio || descripcion===fechafin){    
                                     descripcion=document.getElementById("td"+b+"p"+a).innerHTML;
                                    }
                                    if (persona_id==="" || persona_id===nombreEmpresa || persona_id===estrabajoactual || persona_id===fechainicio || persona_id===fechafin || persona_id===descripcion){
                                     persona_id=document.getElementById("td"+b+"p"+a).innerHTML;
                                    }
                                    if (tipo_empleo_id===""|| tipo_empleo_id===nombreEmpresa || tipo_empleo_id===estrabajoactual || tipo_empleo_id===fechainicio || tipo_empleo_id===fechafin || tipo_empleo_id===descripcion || tipo_empleo_id===persona_id){
                                     tipo_empleo_id= document.getElementById("td"+b+"p"+a).innerHTML;
                                    }
                                    
                                    //}
                                   }
                                }
                                    if(nombreEmpresa==="Agregar" || estrabajoactual==="Agregar" ||fechainicio==="Agregar"|| fechafin==="Agregar" || descripcion==="Agregar" || persona_id==="Agregar" || tipo_empleo_id==="Agregar"){
                                          if(document.getElementById("inpt"+i)===null || document.getElementById("td"+b+"p"+i)===null){return;}
                                        document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                                            localStorage.removeItem('td'); 
                                            if(document.getElementById("inpt"+i)!==null){
                                             document.getElementById("inpt"+i).remove();
                                              }
                                              return;
                                    }
                                let jason={  id,
                                   nombreEmpresa,
                                   estrabajoactual,
                                  fechainicio,
                                    fechafin,
                                   descripcion,
                                  persona_id,
                                    tipo_empleo_id};
                                console.log(JSON.stringify(jason));
                                
                                    fetch('/experiencia/crear/', {
                                                          method: 'POST',
                                                            headers: (
                                                          {
                                                            'Content-Type': 'application/json',
                                                            'Authorization': localStorage.getItem('au_token')
                                                          }
                                                         ),
                                                         
                                                         // body:{title: 'Angular POST Request Example'}
                                                          body: JSON.stringify(jason)
                                                              })
                                                             .then(res => res)
                                                             .then(res=> { console.log(res);
                                                               if(res.status ===200){
                                                                    console.log("200");
                                                                    ExReload();
                                                                    Swal.fire('Agregado!', '', 'success')
                                                                }
                                                                
                                                                // alert("se Agrego correctamente");
                                                             });
                                                             //.catch( err => console.error(err));
                                        //}
                                   // }
                                    //}
                                    //}
                                  //document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inp"+i).value;
                                  localStorage.removeItem("add");
                                  //alert("ADD")
                                  return;
                              }
                                    document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                                    if(document.getElementById("inpt"+i)!==null){
                                       document.getElementById("inpt"+i).remove();
                                   }
                                   let id =0;
                                   let nombreEmpresa="";
                                   let estrabajoactual="";
                                   let fechainicio="";
                                   let fechafin="";
                                   let descripcion="";
                                   let persona_id="";
                                   let tipo_empleo_id="";
                                   let varia="";
                                 for (let a=1;a <= (document.getElementsByTagName("td").length+7);a++){
                                  
                                    if(document.getElementById("td"+b+"p"+a) !==null){
                                      // console.log(document.getElementsByTagName("td")[a].innerHTML);
                                     // for(let c=0;c<document.getElementsByTagName("td").length;c++){
                                      
                                         
                                         id =document.getElementById("thh2"+b).innerHTML;
                                        //console.log("ID"+id);
                                        if(a===i){
                                            localStorage.setItem("lap",b);
                                            localStorage.setItem("lali",i);
                                            
                                        varia=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                       
                                         
                                        
                                        /* if (nombreEmpresa===""){
                                         nombreEmpresa=document.getElementById("td"+b+"p"+a).innerHTML;
                                       }
                                    if (estrabajoactual==="" || estrabajoactual===nombreEmpresa ){
                                     estrabajoactual=document.getElementById("td"+b+"p"+a).innerHTML;
                                    }   
                                    if (fechainicio==="" || fechainicio===nombreEmpresa || fechainicio===estrabajoactual ){
                                     fechainicio=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                    if (fechafin==="" || fechafin===nombreEmpresa || fechafin===estrabajoactual || fechafin===fechainicio){
                                     fechafin=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                    if (descripcion==="" || descripcion===nombreEmpresa || descripcion===estrabajoactual || descripcion===fechainicio || descripcion===fechafin){    
                                     descripcion=document.getElementById("td"+b+"p"+a).innerHTML;
                                    }
                                    if (persona_id==="" || persona_id===nombreEmpresa || persona_id===estrabajoactual || persona_id===fechainicio || persona_id===fechafin || persona_id===descripcion ){
                                    
                                         persona_id=document.getElementById("td"+b+"p"+a).innerHTML;
                                       
                                            
                        }
                                    if (tipo_empleo_id===""|| tipo_empleo_id===nombreEmpresa || tipo_empleo_id===estrabajoactual || tipo_empleo_id===fechainicio || tipo_empleo_id===fechafin || tipo_empleo_id===descripcion || tipo_empleo_id===persona_id){
                                     tipo_empleo_id= document.getElementById("td"+b+"p"+a).innerHTML;
                                    }*/
                                    
                                    //}
                                   }
                                }
                                let multi=parseInt(localStorage.getItem("lap"))*8;
                                
                                         for(let aa=(multi-6);aa<=multi;aa++){
                                             console.log("AAA"+aa);
                                             
                                          if (aa===(multi-6)){ 
                                        nombreEmpresa=document.getElementById("td"+b+"p"+aa).innerHTML;
                                        }
                                        if(aa===(multi-5)){
                                        estrabajoactual=document.getElementById("td"+b+"p"+aa).innerHTML;
                                        }
                                        if(aa===(multi-4)){
                                        fechainicio=document.getElementById("td"+b+"p"+aa).innerHTML;
                                        }
                                        if(aa===(multi-3)){
                                        fechafin=document.getElementById("td"+b+"p"+aa).innerHTML;
                                        }
                                        if(aa===(multi-2)){
                                        descripcion=document.getElementById("td"+b+"p"+aa).innerHTML;
                                        }
                                        if(aa===(multi-1)){
                                        persona_id=document.getElementById("td"+b+"p"+aa).innerHTML;
                                        }
                                        if(aa===multi){
                                        tipo_empleo_id= document.getElementById("td"+b+"p"+aa).innerHTML;
                                        } 
                                        }
                                       
                                       /* nombreEmpresa=document.getElementById("td"+b+"p"+a).innerHTML;
                                        estrabajoactual=document.getElementById("td"+b+"p"+a).innerHTML;
                         
                                        fechainicio=document.getElementById("td"+b+"p"+a).innerHTML;
                                 
                                        fechafin=document.getElementById("td"+b+"p"+a).innerHTML;
                                   
                                        descripcion=document.getElementById("td"+b+"p"+a).innerHTML;
                                        persona_id=document.getElementById("td"+b+"p"+a).innerHTML;
                                          
                                        
                                        tipo_empleo_id= document.getElementById("td"+b+"p"+a).innerHTML;*/
                                 
                               /* console.log(id);
                                console.log("nombre emp "+nombreEmpresa);
                                console.log("actual "+estrabajoactual);
                                console.log("fechini"+fechainicio);
                                   console.log("fefin"+fechafin);
                                   console.log("des"+descripcion);
                                   console.log("pid"+ persona_id);
                                   console.log("tpe"+ tipo_empleo_id);*/
                                   fetch('/experiencia/editar/'+id+'?nombreEmpresa='+ nombreEmpresa
                                                +'&estrabajoactual='+ estrabajoactual
                                                +'&fechainicio='+fechainicio
                                                +'&fechafin='+fechafin
                                                +'&descripcion='+descripcion
                                                +'&persona_id='+  persona_id
                                                +'&tipo_empleo_id='+ tipo_empleo_id, {
                                                          method: 'PUT',
                                                            headers: (
                                                          {
                                                            'Content-Type': 'application/json',
                                                            'Authorization': localStorage.getItem('au_token')
                                                          }
                                                         ),
                                                          body:{title: 'Angular POST Request Example'}
                                                          /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
                                                              })
                                                             .then(res => res.json())
                                                             .then(res=> { //console.log(res);
                                                                ExReload();
                                                                 Swal.fire('Se modifico Coorectamente!', '', 'success');
                                                                 
                                                             })
                                                             .catch( err => console.error(err));
                                ct=0;
                                return;
                            }
                                console.log(` ${e.keyCode}`);
                                if(e.key ==='Scape'){
                             
                        }
                            
                        
                    });
                }
            });
        }
   } }
}

if(document.getElementById("td1")!==null){
    for(let i=1;i<=13;i++){
       
       //document.getElementById("td"+i).innerHTML="";
    if (document.getElementById("td"+i)!==null)  { 
    document.getElementById("td"+i).addEventListener("dblclick", event =>{
       ct+=1;
       if(ct<=1){
        if(document.getElementById("inpt"+i)!==null){
            document.getElementById("inpt"+i).remove();
        }
        //console.log(document.getElementById("td"+i).innerHTML);
         pepe=document.getElementById("td"+i).innerHTML.toString();
         document.getElementById("td"+i).innerHTML="";
        localStorage.setItem("td",pepe);
       let inpt= document.createElement("input");
       inpt.setAttribute("id","inpt"+i);
       inpt.setAttribute("type","text");
       inpt.setAttribute("value",localStorage.getItem("td"));
       
       inpt.value=localStorage.getItem("td").toString();
       //document.getElementById("tr21").appendChild(inpt);
       document.getElementById("td"+i).appendChild(inpt);
         inpt.addEventListener("keypress",function (e) {
    if (e.key === 'Enter') {
        document.getElementById("td"+i).innerHTML=document.getElementById("inpt"+i).value;
         if(document.getElementById("inpt"+i)!==null){
            document.getElementById("inpt"+i).remove();
        }
        
        let acerca_de=document.getElementById("td9").innerHTML.toString();
        let nombre=document.getElementById("td1").innerHTML.toString();
        let apellido =document.getElementById("td2").innerHTML.toString();
        let domicilio =document.getElementById("td3").innerHTML.toString();
        let fechanac=document.getElementById("td4").innerHTML.toString();
        let telefono=document.getElementById("td5").innerHTML.toString();
        let correo=document.getElementById("td6").innerHTML.toString();
        let sobre_mi=document.getElementById("td7").innerHTML.toString();
        let url_foto=document.getElementById("td8").innerHTML.toString();
        let facebook=document.getElementById("td10").innerHTML.toString();
        let twiter=document.getElementById("td11").innerHTML.toString();
        let instagram=document.getElementById("td12").innerHTML.toString();
        let infcont =document.getElementById("td13").innerHTML.toString();
     
      fetch('/personas/editar/'+document.getElementById("th21").innerHTML+'?acerca_de='+acerca_de
  +'&nombre='+nombre
  +'&apellido='+apellido
  +'&domicilio='+domicilio
  +'&fechanac='+fechanac
  +'&telefono='+telefono
  +'&correo='+correo
  +'&sobre_mi='+sobre_mi
  +'&url_foto='+url_foto
  +'&facebook='+facebook
  +'&twiter='+twiter
  +'&instagram='+instagram
  +'&infcont='+infcont, {
        method: 'PUT',
          headers: (
        {
          'Content-Type': 'application/json',
          'Authorization': localStorage.getItem('au_token')
        }
       ),
        body:{title: 'Angular POST Request Example'}
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> { console.log(res);
               alert("se modifico correctamente");
           })
           .catch( err => console.error(err));   ;
     ct=0;
          //  if(document.getElementById("inpt"+i)!==null){
           // document.getElementById("inpt"+i).remove();
       // }
    }
           
        });
   }
            
        
        
    } 
        );}} }
});
  
  if(intpepe !==""){  
    intpepe.addEventListener("keypress",function (e) {
    if (e.key === 'Enter') {
     pepe.innerHTML=document.getElementById("inpt"+i).value;
     
          //  if(document.getElementById("inpt"+i)!==null){
           // document.getElementById("inpt"+i).remove();
       // }
    }
           
        });}
            //  window.addEventListener("click", function( event ) {
                // highlight the mouseover target
             
                
           //   }, false);
          /*  window.addEventListener('load', this.loaded.bind(this));*/
          function onClicka(i){
              console.log(i);
              pepe=document.getElementById("td"+i);
        
       let inpt= document.createElement("input");
       inpt.setAttribute("id","inpt"+i);
       inpt.setAttribute("type","text");
       inpt.value=pepe;
       //document.getElementById("td"+i).innerHTML="";
       if(document.getElementById("td"+i)!==null){
           document.getElementById("td"+i).remove();
       //document.getElementById("td"+i).appendChild(inpt);
       document.getElementById("tr21").appendChild(inpt);
         }
            intpepe= document.getElementById("inpt"+i)
            if(document.getElementById("td"+i)!==null){ 
            document.getElementById("td"+i).innerHTML="";
            }
            return;
          }
 function add(b,i){
     let pos=document.getElementsByTagName("td").length/7;
                                  let sumar=7;
                                            if(document.getElementById("inpt"+i)===null || document.getElementById("td"+b+"p"+i)===null){return;}
                                      document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                                      if (document.getElementById("inpt"+i)!==null){
                                        document.getElementById("inpt"+i).remove();
                                    }
                                    let id =0;
                                   let nombreEmpresa="";
                                   let estrabajoactual="";
                                   let fechainicio="";
                                   let fechafin="";
                                   let descripcion="";
                                   let persona_id="";
                                   let tipo_empleo_id="";
                                    for (let a=1;a <= (document.getElementsByTagName("td").length+5);a++){
                                 
                                    if(document.getElementById("td"+b+"p"+a) !==null){
                                      // console.log(document.getElementsByTagName("td")[a].innerHTML);
                                     // for(let c=0;c<document.getElementsByTagName("td").length;c++){
                                      
                                       
                                         id =0;
                                        console.log("ID"+id);
                                       
                                       if (nombreEmpresa===""){
                                         nombreEmpresa=document.getElementById("td"+b+"p"+a).innerHTML;
                                       }
                                    if (estrabajoactual==="" || estrabajoactual===nombreEmpresa /*|| estrabajoactual===fechainicio || estrabajoactual===fechafin || descripcion*/){
                                     estrabajoactual=document.getElementById("td"+b+"p"+a).innerHTML;
                                    }   
                                    if (fechainicio==="" || fechainicio===nombreEmpresa || fechainicio===estrabajoactual ){
                                     fechainicio=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                    if (fechafin==="" || fechafin===nombreEmpresa || fechafin===estrabajoactual || fechafin===fechainicio){
                                     fechafin=document.getElementById("td"+b+"p"+a).innerHTML;
                                        }
                                    if (descripcion==="" || descripcion===nombreEmpresa || descripcion===estrabajoactual || descripcion===fechainicio || descripcion===fechafin){    
                                     descripcion=document.getElementById("td"+b+"p"+a).innerHTML;
                                    }
                                    if (persona_id==="" || persona_id===nombreEmpresa || persona_id===estrabajoactual || persona_id===fechainicio || persona_id===fechafin || persona_id===descripcion){
                                     persona_id=document.getElementById("td"+b+"p"+a).innerHTML;
                                    }
                                    if (tipo_empleo_id===""|| tipo_empleo_id===nombreEmpresa || tipo_empleo_id===estrabajoactual || tipo_empleo_id===fechainicio || tipo_empleo_id===fechafin || tipo_empleo_id===descripcion || tipo_empleo_id===persona_id){
                                     tipo_empleo_id= document.getElementById("td"+b+"p"+a).innerHTML;
                                    }
                                    
                                    //}
                                   }
                                }
                                    if(nombreEmpresa==="Agregar" || estrabajoactual==="Agregar" ||fechainicio==="Agregar"|| fechafin==="Agregar" || descripcion==="Agregar" || persona_id==="Agregar" || tipo_empleo_id==="Agregar"){
                                          if(document.getElementById("inpt"+i)===null || document.getElementById("td"+b+"p"+i)===null){return;}
                                        document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                                            localStorage.removeItem('td'); 
                                            if(document.getElementById("inpt"+i)!==null){
                                             document.getElementById("inpt"+i).remove();
                                              }
                                              return;
                                    }
                                let jason={  id,
                                   nombreEmpresa,
                                   estrabajoactual,
                                  fechainicio,
                                    fechafin,
                                   descripcion,
                                  persona_id,
                                    tipo_empleo_id};
                                console.log(JSON.stringify(jason));
                                
                                    fetch('/experiencia/crear/', {
                                                          method: 'POST',
                                                            headers: (
                                                          {
                                                            'Content-Type': 'application/json',
                                                            'Authorization': localStorage.getItem('au_token')
                                                          }
                                                         ),
                                                         
                                                         // body:{title: 'Angular POST Request Example'}
                                                          body: JSON.stringify(jason)
                                                              })
                                                             .then(res => res)
                                                             .then(res=> { console.log(res);
                                                               if(res.status ===200){
                                                                    console.log("200");
                                                                    ExReload();
                                                                    Swal.fire('Agregado!', '', 'success')
                                                                }
                                                                
                                                                // alert("se Agrego correctamente");
                                                             });
                                                             //.catch( err => console.error(err));
                                        //}
                                   // }
                                    //}
                                    //}
                                  //document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inp"+i).value;
                                  localStorage.removeItem("add");
                                  //alert("ADD")
                                  return;
 }
 function downk(b,i){
      let contia=i+1;
                           //    console.log("TAB");
                         
                            if(document.getElementById("td"+b+"p"+contia)===null){
                                return;
                            }
                             if(Object.values(document.getElementById("td"+b+"p"+contia).innerHTML.toString())[0] !== '<'){
                         pepe=document.getElementById("td"+b+"p"+contia).innerHTML.toString();
                        }
                        document.getElementById("td"+b+"p"+contia).innerHTML="";
                         //if(localStorage.getItem("td"))
                          
                       let inptt= document.createElement("input");
                       
                        //document.getElementById("inpt"+i);
                       inptt.setAttribute("id","inpt"+contia);
                       inptt.setAttribute("type","text");
                       inptt.setAttribute("value",localStorage.getItem("td"));
                        
                       inptt.value=pepe;
                       console.log('Soy TT'+inptt.value);
                       //document.getElementById("tr21").appendChild(inpt);
                       document.getElementById("td"+b+"p"+contia).appendChild(inptt);
                        if(document.getElementById("td"+b+"p"+i)===null || document.getElementById("inpt"+i)===null || document.getElementById("td"+b+"p"+contia)===null || document.getElementById("inpt"+contia)===null){
                               return;
                           }
                           document.getElementById("td"+b+"p"+i).innerHTML=document.getElementById("inpt"+i).value;
                          localStorage.removeItem('td'); 
                          if(document.getElementById("inpt"+i)!==null){
                           document.getElementById("inpt"+i).remove();
                    
                            }
                           return;
 }
 function clickmeEdu(b,i){
       localStorage.setItem("agregar","1");
                       console.log("clickme"+b +" "+i);//b2 i 4
                      let tbd=(document.getElementsByTagName("td").length+9);
                       let bb=b+1;
                       let ii=i+1;
                        if(document.getElementById("tbd"+tbd)!==null){
                           document.getElementById("tbd"+tbd).remove();
                       }
                       const paratd = document.createElement("tbody");
                       paratd.setAttribute("id","tbd"+tbd);
                  document.getElementById("idedu1").appendChild(paratd);
                  const para6 = document.createElement("tr");
                     para6.setAttribute("id","tr"+b+""+ii);
                  document.getElementById("tbd"+tbd).appendChild(para6);
                   const para7 = document.createElement("th");
                   para7.setAttribute("id","th"+b+""+ii);
                     para7.setAttribute("scope","row");
                     para7.innerHTML=i+1;
                  document.getElementById("tr"+b+""+ii).appendChild(para7);
                  let coni=parseInt(localStorage.getItem("con"))+1;
                  for(let y=1;y<=9;y++){
                     
                      let im=coni+y;
                       const para8 = document.createElement("td");
                       para8.setAttribute("id","td"+ii+"p"+im);
                       para8.innerHTML="Agregar";
                        document.getElementById("tr"+b+""+ii).appendChild(para8);
                        /*const inptu=document.createElement("input");
                        inptu.setAttribute("type","text");
                        inptu.setAttribute("id","inpt"+y);
                        if(y===7){
                            inptu.setAttribute("title","Presione Enter para Agregar");
                        }
                        inptu.value="Agregar";
                        document.getElementById("td"+ii+"p"+im).appendChild(inptu);*/
                    }
 }
 function clickmeCn(b,i){
     let len=0;
     let edi,sobre,de,saber,personaid,d,f,g,h,j,k,l,m,ag,agga;
     ag=b+4;
     agga=i+4;
              len=parseInt(localStorage.getItem("lengh"))+5;     
           localStorage.setItem("lengh",len);
           localStorage.setItem("posicion",b+1);
           d=b;
           f=i-3;
           d=b;
           console.log(b+" "+i);
           g=d+1;
           h=g+1;
           j=h+1;
           k=f+1;
           l=k+1;
           m=l+1;
           
                       localStorage.setItem("add","1");
                       console.log("clickme"+b +" "+i);//b2 i 4
                      let tbd=(document.getElementsByTagName("td").length+4)/4;
                       let bb=b+1;
                       let ii=i+1;
                        if(document.getElementById("tbd"+tbd)!==null){
                           document.getElementById("tbd"+tbd).remove();
                       }
                       const paratd = document.createElement("tbody");
                       paratd.setAttribute("id","tbd"+tbd);
                  document.getElementById("idcon1").appendChild(paratd);
                  const para6 = document.createElement("tr");
                     para6.setAttribute("id","tr2"+ii);
                  document.getElementById("tbd"+tbd).appendChild(para6);
                   const para7 = document.createElement("th");
                   para7.setAttribute("id","th2"+ii);
                     para7.setAttribute("scope","row");
                     para7.innerHTML=i+1;
                  document.getElementById("tr2"+ii).appendChild(para7);
                  let coni=parseInt(localStorage.getItem("con"))+1;
                  for(let y=1;y<=4;y++){
                     
                      let im=coni+y;
                       const para8 = document.createElement("td");
                       para8.setAttribute("id","td"+ii+"p"+im);
                       para8.innerHTML="Agregar";
                        document.getElementById("tr2"+ii).appendChild(para8);
                        
                    }
                       
                  
                   }
 function clickme(b,i){
                   
                       localStorage.setItem("add","1");
                       console.log("clickme"+b +" "+i);//b2 i 4
                      let tbd=(document.getElementsByTagName("td").length+7)/7;
                       let bb=b+1;
                       let ii=i+1;
                        if(document.getElementById("tbd"+tbd)!==null){
                           document.getElementById("tbd"+tbd).remove();
                       }
                       const paratd = document.createElement("tbody");
                       paratd.setAttribute("id","tbd"+tbd);
                  document.getElementById("idexp1").appendChild(paratd);
                  const para6 = document.createElement("tr");
                     para6.setAttribute("id","tr"+b+""+ii);
                  document.getElementById("tbd"+tbd).appendChild(para6);
                   const para7 = document.createElement("th");
                   para7.setAttribute("id","th"+b+""+ii);
                     para7.setAttribute("scope","row");
                     para7.innerHTML=i+1;
                  document.getElementById("tr"+b+""+ii).appendChild(para7);
                  let coni=parseInt(localStorage.getItem("con"))+1;
                  for(let y=1;y<=7;y++){
                     
                      let im=coni+y;
                       const para8 = document.createElement("td");
                       para8.setAttribute("id","td"+ii+"p"+im);
                       para8.innerHTML="Agregar";
                        document.getElementById("tr"+b+""+ii).appendChild(para8);
                        /*const inptu=document.createElement("input");
                        inptu.setAttribute("type","text");
                        inptu.setAttribute("id","inpt"+y);
                        if(y===7){
                            inptu.setAttribute("title","Presione Enter para Agregar");
                        }
                        inptu.value="Agregar";
                        document.getElementById("td"+ii+"p"+im).appendChild(inptu);*/
                    }
                       
                  
                   }
         function loaded() {
                if(localStorage.getItem("au_token")===null || localStorage.getItem("au_usr") === null){
                    //alert("hola");
                    window.location.assign("/");
                    }
	      
	    } 
        </script>
    </head>
    <body>
        <div class="container">
            
              <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link"  onclick=" PersReload();" href="#"><i class="fa-solid fa-eye"></i>Persona</a>
             
              </li>
              <li class="nav-item">
                <a class="nav-link"   onclick="ExReload();" href="#"><i class="fa-solid fa-eye"></i>Experiencia</a>
                
              </li>
              <li class="nav-item">
                  <a class="nav-link" onclick="EducReload();" href="#"><i class="fa-solid fa-eye"></i>Educacion</a>
                
              </li>
              <li class="nav-item">
                <a class="nav-link" onclick="ConocReload();" href="#"><i class="fa-solid fa-eye"></i>Conocimientos</a>
                
              </li>
              <li class="nav-item">
                <a class="nav-link"  href="/"><i class="fa-solid fa-door-closed"></i></a>                
              </li>
            </ul>
          </div>
        </div>
      </nav>
            
            <div id="contenido" style="overflow-y: scroll;overflow-x: scroll;">
          
        <!--<table> <tr> <td> <input type="text" name="company" form="my_form"></td> <button type="button" class="btn btn-success">ok</button> </td> </tr> </table> -->
        </div>
            
        </div>
        <script>
           

       function PerS(){
         /*  for(let i=0;i<medtype.length;i++){*/
               
           
            var xmlHttp = new XMLHttpRequest();
         //      xmlHttp.open(miInit,true);
           //  xmlHttp.responseType("","")
             xmlHttp.open('GET','/personas/traer');
               xmlHttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
               xmlHttp.setRequestHeader('Authorization', localStorage.getItem('au_token').toString());
               xmlHttp.send();
             xmlHttp.onreadystatechange = function() {
    if (this.readyState === 4 && this.status === 200) {
        
    let concat="";
        let comi="'";
        let c=0;
        let a=0;
        let conta=0;
     let concd="";
       let arri=[];
        for(let r of this.responseText){
            conta+=1;
            //alert(JSON.stringify(r));
             if(r === '[' || r === '\\' || r === ']' || r==='"'){
                // alert("soy r "+r);
                 
             }else{
                 
                if(r===':'){
                    c+=1;
                   
                    
                
                    concat=concat;
                   arri.push(concat);
                              console.log(concat);
                             concat="";
                  
                }else{
                    if(c===1){
                    concat=concat+r;
                    c=0;
                    }else{
                        if(r===','){
                        
                          
                           
                            concat=concat;
                             arri.push(concat);
                              console.log(concat);
                             concat="";
                                a+=1;
                         }else{
                              if(a===1){
                              
                               concat=concat+r;
                               // arri.push(concat);
                             
                                a=0;
                            }else{
                               
                                if(r==='}'){
                                        
                                        
                                       
                                    concat=concat+comi+r;
                                    
                                   
                                }else{
                                       
                                        concat=concat+r;
                                   
                                   
                                }
                                }
                         }
                    }
                }
                
      //window.location.assign("/viewf");
     }
      for(let i=0;i<arri.length;i++ ){
          
      //console.log(arri[i]);
         var newDiv = document.createElement("div");
            var newContent = document.createTextNode(arri[i]);
            newDiv.appendChild(newContent); //añade texto al div creado.
            //
              var currentDiv = document.getElementById("div"+i);
                document.body.insertBefore(newDiv, currentDiv);
                            //arri.shift();
                    
                    }
     };
             /*}*/
       }
   }
       }
       function perSona(){
           borrar();
          /* if(document.getElementsByTagName("br")!==null && document.getElementsByTagName("input")!==null){
                 var inpT=document.getElementsByTagName("input");
                    while (inpT.length) {
                                inpT[0].parentNode.removeChild(inpT[0]);
                        }
                     var brs = document.getElementsByTagName("br");
                             while (brs.length) {
                                brs[0].parentNode.removeChild(brs[0]);
                              }
        }*/
                 let concat="";
        let comi="'";
        let c=0;
        let a=0;
        let conta=0;
     let concd="";
          fetch('/personas/traer', {
        method: 'GET',
          headers: (
        {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': localStorage.getItem('au_token')
        }
       )
        
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
               
                 if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
               let rr=Object.values(res);
           
      
        for(let r of rr){
            console.log(Object.values(r).length)
            conta+=1;
            //alert(JSON.stringify(r));
             if(r === '[' ||  r === ']' ){
                // alert("soy r "+r);
                 
             }else{
                 
                 if(document.getElementById("id") !==null){
                         for(let i=0;i<Object.values(r).length;i++){
                       const element = document.getElementById("id"+Object.values(r)[i]);
                        element.remove(); 
                        var brs = document.getElementsByTagName("br");
                             while (brs.length) {
                                brs[0].parentNode.removeChild(brs[0]);
                              }
                             
                        }
                    }
                for(let i=0;i<Object.values(r).length;i++){
                   
                    
                      const para = document.createElement("input");
                    para.setAttribute("class","form-control");
                    para.setAttribute("type","text");
                     para.setAttribute("id","id"+Object.values(r)[i]);
                  para.value = Object.values(r)[i];
                  document.getElementById("contenido").appendChild(para);  
                  
                }
                                  
                                }
                         }
                         const para = document.createElement("br");
                         para.setAttribute("id","br");
                        document.getElementById("contenido").appendChild(para);
                    });
                   // alert(concat);
             //console.log(concat);
             
       }
 function ExReload(){
     borrar();
     let mas=0;
      let conta=0;
     let con=0;
          fetch('/experiencia/traer', {
        method: 'GET',
          headers: (
        {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': localStorage.getItem('au_token')
        }
       )
        
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
               
                 if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
               let rr=Object.values(res);
           
      
        for(let r of rr){
            
            conta+=1;
            //alert(JSON.stringify(r));
             if(r === '[' ||  r === ']' ){
                // alert("soy r "+r);
                 
             }else{
                 mas+=1;
                 if (conta<=1){
                    const para = document.createElement("table");
                    para.setAttribute("class","table table-dark table-striped");
                     para.setAttribute("id","idexp"+conta);
                  document.getElementById("contenido").appendChild(para);
                  const para2 = document.createElement("thead");
                     para2.setAttribute("id","thea"+conta);
                  document.getElementById("idexp"+conta).appendChild(para2);
                  const para3 = document.createElement("tr");
                     para3.setAttribute("id","tr1"+conta);
                  document.getElementById("thea"+conta).appendChild(para3);
                  
                  for(let i=0; i<=7;i++){
                      const para4 = document.createElement("th");
                  para4.setAttribute("scope","col");
                     para4.setAttribute("id","th1"+conta);
                     if(i===0){
                     para4.innerHTML="id";
                    }
                    if(i===1){
                     para4.innerHTML="Nombre Empresa";
                    }
                    if(i===2){
                     para4.innerHTML="Trabajo Actual";
                    }
                    if(i===3){
                     para4.innerHTML="Fecha Inicio";
                    }
                    if(i===4){
                     para4.innerHTML="Fecha Fin";
                    }
                    if(i===5){
                     para4.innerHTML="Descripcion";
                    }
                    if(i===6){
                     para4.innerHTML="PersonaId";
                    }
                    if(i===7){
                     para4.innerHTML="Tipo Empleo";
                    }
                    
                    
                  document.getElementById("tr1"+conta).appendChild(para4);
                }
                 }
                const para5 = document.createElement("tbody");
                     para5.setAttribute("id","tbd"+conta);
                  document.getElementById("idexp"+1).appendChild(para5);
                  const para6 = document.createElement("tr");
                     para6.setAttribute("id","tr2"+conta);
                  document.getElementById("tbd"+conta).appendChild(para6);
                  const para7 = document.createElement("th");
                     para7.setAttribute("scope","row");
                     para7.setAttribute("id","th2"+conta);
                     para7.innerHTML=r.id;
                  document.getElementById("tr2"+conta).appendChild(para7);
                  const putt=document.createElement("th");
                    putt.setAttribute("scope","row");
                     putt.setAttribute("id","thh2"+conta);
                     putt.setAttribute("hidden","true");
                     putt.innerHTML=r.id;
                  document.getElementById("tr2"+conta).appendChild(putt);
                let o=0;
                    for(let i=0;i<Object.values(r).length;i++){
                   
                   
                if(i>0){
                    o=i;
                    
                  
              }
                  
                  
                }
                localStorage.setItem("o",o);
               
                for(let i=0;i<Object.values(r).length;i++){
                      con+=1;
                      
                       let resuu= document.getElementsByTagName("td").length/parseInt(localStorage.getItem("o"));
                   if (mas===7){
                       let lng=document.getElementsByTagName("td").length+1;
                       localStorage.setItem("lengh",lng);
                       mas=0;
                   }
                   
                 if(i>0){
                  const para8 = document.createElement("td");
                  
                      para8.setAttribute("id","td"+conta+"p"+con);
                  localStorage.setItem("con",con);
                                para8.innerHTML=Object.values(r)[i];
                  document.getElementById("tr2"+conta).appendChild(para8);
              }
                }
                    
                    
                                  
                                }
                         }
                        
                    });
     
 }      
 function PersReload(){
     borrar();
       let conta=0;
     let concd="";
          fetch('/personas/traer', {
        method: 'GET',
          headers: (
        {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': localStorage.getItem('au_token')
        }
       )
        
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
               
                 if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
               let rr=Object.values(res);
           
      
        for(let r of rr){
            
            conta+=1;
            //alert(JSON.stringify(r));
             if(r === '[' ||  r === ']' ){
                // alert("soy r "+r);
                 
             }else{
                 
                    const para = document.createElement("table");
                    para.setAttribute("class","table table-dark table-striped");
                     para.setAttribute("id","id"+conta);
                  document.getElementById("contenido").appendChild(para);
                  const para2 = document.createElement("thead");
                     para2.setAttribute("id","thea"+conta);
                  document.getElementById("id"+conta).appendChild(para2);
                  const para3 = document.createElement("tr");
                     para3.setAttribute("id","tr1"+conta);
                  document.getElementById("thea"+conta).appendChild(para3);
                  
                  for(let i=0; i<=14;i++){
                      const para4 = document.createElement("th");
                  para4.setAttribute("scope","col");
                     para4.setAttribute("id","th1"+conta);
                     if(i===0){
                     para4.innerHTML="id";
                    }
                    if(i===1){
                     para4.innerHTML="Nombre";
                    }
                    if(i===2){
                     para4.innerHTML="Apellido";
                    }
                    if(i===3){
                     para4.innerHTML="Domicilio";
                    }
                    if(i===4){
                     para4.innerHTML="Nacimiento";
                    }
                    if(i===5){
                     para4.innerHTML="Telefono";
                    }
                    if(i===6){
                     para4.innerHTML="Correo";
                    }
                    if(i===7){
                     para4.innerHTML="Sobre mi";
                    }
                    if(i===8){
                     para4.innerHTML="Url_Foto";
                    }
                    if(i===9){
                     para4.innerHTML="Acerca De";
                    }
                    if(i===10){
                     para4.innerHTML="Facebook";
                    }
                    if(i===11){
                     para4.innerHTML="Instagram";
                    }
                    if(i===12){
                     para4.innerHTML="Ttwiter";
                    }
                    if(i===13){
                     para4.innerHTML="Info Contacto";
                    }
                  document.getElementById("tr1"+conta).appendChild(para4);
                }
                const para5 = document.createElement("tbody");
                     para5.setAttribute("id","tbd"+conta);
                  document.getElementById("id"+conta).appendChild(para5);
                  const para6 = document.createElement("tr");
                     para6.setAttribute("id","tr2"+conta);
                  document.getElementById("tbd"+conta).appendChild(para6);
                  const para7 = document.createElement("th");
                     para7.setAttribute("scope","row");
                     para7.setAttribute("id","th2"+conta);
                     para7.innerHTML=r.id;
                  document.getElementById("tr2"+conta).appendChild(para7);
                for(let i=0;i<Object.values(r).length;i++){
                   
                   
                if(i>0){
                  const para8 = document.createElement("td");
                  para8.setAttribute("id","td"+i)
                 para8.innerHTML=Object.values(r)[i];
                  document.getElementById("tr2"+conta).appendChild(para8);
              }
                  
                }
                                  
                                }
                         }
                        
                    });
     
     
 }
 function Experiencia(){
     borrar();
   /*  if(document.getElementsByTagName("br")!==null && document.getElementsByTagName("input")!==null){
         
     
     var inpT=document.getElementsByTagName("input");
      while (inpT.length) {
                                inpT[0].parentNode.removeChild(inpT[0]);
         }
      var brs = document.getElementsByTagName("br");
                             while (brs.length) {
                                brs[0].parentNode.removeChild(brs[0]);
                              }
       }*/
      fetch('/experiencia/traer', {
        method: 'GET',
          headers: (
        {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': localStorage.getItem('au_token')
        }
       )
        
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
                if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
                 console.log(res);
               let rr=Object.values(res);
           
      let conta=0;
        for(let r of rr){
            console.log(Object.values(r).length)
            
            //alert(JSON.stringify(r));
             if(r === '[' ||  r === ']' ){
                // alert("soy r "+r);
                 
             }else{
                 
                 
                        /* for(let i=0;i<Object.values(r).length;i++){
                             if(document.getElementById("exp"+Object.values(r)[i]) !==null){
                       const element = document.getElementById("exp"+Object.values(r)[i]);
                        element.remove(); 
                       
                              }
                        }*/
                    
                for(let i=0;i<Object.values(r).length;i++){
                   conta+=1;
                   
                    
                      const para = document.createElement("input");
                    para.setAttribute("class","form-control");
                    para.setAttribute("type","text");
                     para.setAttribute("id","exp"+Object.values(r)[i]);
                  para.value = Object.values(r)[i];
                  document.getElementById("contenido").appendChild(para);
                  
                  if(conta===8){
                     
                      
                       const parae = document.createElement("br");
                        document.getElementById("contenido").appendChild(parae);
                        conta=0;
                   }
                  
                }
                                  
                                }
                         }
                    });
     
 }
 function EducReload(){
     borrar();
     let mas=0;
      let conta=0;
     let con=0;
      fetch('/educacion/traer', {
        method: 'GET',
          headers: (
        {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': localStorage.getItem('au_token')
        }
       )
        
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
               
                let rr=Object.values(res);
           
      
        for(let r of rr){
            
            conta+=1;
            //alert(JSON.stringify(r));
             if(r === '[' ||  r === ']' ){
                // alert("soy r "+r);
                 
             }else{
                 mas+=1;
                 if (conta<=1){
                    const para = document.createElement("table");
                    para.setAttribute("class","table table-dark table-striped");
                     para.setAttribute("id","idedu"+conta);
                  document.getElementById("contenido").appendChild(para);
                  const para2 = document.createElement("thead");
                     para2.setAttribute("id","thea"+conta);
                  document.getElementById("idedu"+conta).appendChild(para2);
                  const para3 = document.createElement("tr");
                     para3.setAttribute("id","tr1"+conta);
                  document.getElementById("thea"+conta).appendChild(para3);
                  
                  for(let i=0; i<=9;i++){
                      const para4 = document.createElement("th");
                  para4.setAttribute("scope","col");
                     para4.setAttribute("id","th1"+conta);
                     if(i===0){
                     para4.innerHTML="id";
                    }
                    if(i===1){
                     para4.innerHTML="Id Persona";
                    }
                    if(i===2){
                     para4.innerHTML="Nivel";
                    }
                    if(i===3){
                     para4.innerHTML="Establecimiento";
                    }
                    if(i===4){
                     para4.innerHTML="URL Logo";
                    }
                    if(i===5){
                     para4.innerHTML="Url lugar";
                    }
                    if(i===6){
                     para4.innerHTML="Año inicio";
                    }
                    if(i===7){
                     para4.innerHTML="Año fin";
                    }
                    if(i===8){
                      para4.innerHTML="Titulo";
                        
                    }
                    if(i===9){
                        para4.innerHTML="Persona Id"
                    }
                    
                  document.getElementById("tr1"+conta).appendChild(para4);
                }
                 }
                const para5 = document.createElement("tbody");
                     para5.setAttribute("id","tbd"+conta);
                  document.getElementById("idedu"+1).appendChild(para5);
                  const para6 = document.createElement("tr");
                     para6.setAttribute("id","tr2"+conta);
                  document.getElementById("tbd"+conta).appendChild(para6);
                  const para7 = document.createElement("th");
                     para7.setAttribute("scope","row");
                     para7.setAttribute("id","th2"+conta);
                     para7.innerHTML=r.id;
                  document.getElementById("tr2"+conta).appendChild(para7);
                  const putt=document.createElement("th");
                    putt.setAttribute("scope","row");
                     putt.setAttribute("id","thh2"+conta);
                     putt.setAttribute("hidden","true");
                     putt.innerHTML=r.id;
                  document.getElementById("tr2"+conta).appendChild(putt);
                let o=0;
                    for(let i=0;i<Object.values(r).length;i++){
                   
                   
                if(i>0){
                    o=i;
                    
                  
              }
                  
                  
                }
                localStorage.setItem("o",o);
               
                for(let i=0;i<Object.values(r).length;i++){
                      con+=1;
                      
                       let resuu= document.getElementsByTagName("td").length/parseInt(localStorage.getItem("o"));
                   if (mas===7){
                       let lng=document.getElementsByTagName("td").length+1;
                       localStorage.setItem("lengh",lng);
                       mas=0;
                   }
                   
                 if(i>0){
                  const para8 = document.createElement("td");
                  
                      para8.setAttribute("id","td"+conta+"p"+con);
                  localStorage.setItem("con",con);
                                para8.innerHTML=Object.values(r)[i];
                  document.getElementById("tr2"+conta).appendChild(para8);
              }
                }
                    
                    
                                  
                                }
                         }
               
               
               
               
           });
 }
 function Educacion(){
     borrar();
    /* if(document.getElementsByTagName("br")!==null && document.getElementsByTagName("input")!==null){
         
     
     var inpT=document.getElementsByTagName("input");
      while (inpT.length) {
                                inpT[0].parentNode.removeChild(inpT[0]);
         }
      var brs = document.getElementsByTagName("br");
                             while (brs.length) {
                                brs[0].parentNode.removeChild(brs[0]);
                              }
       }*/
      fetch('/educacion/traer', {
        method: 'GET',
          headers: (
        {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': localStorage.getItem('au_token')
        }
       )
        
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
                if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
                 console.log(res);
               let rr=Object.values(res);
           
      let conta=0;
        for(let r of rr){
            console.log(Object.values(r).length)
            
            //alert(JSON.stringify(r));
             if(r === '[' ||  r === ']' ){
                // alert("soy r "+r);
                 
             }else{
                 
                 
                       /*  for(let i=0;i<Object.values(r).length;i++){
                             if(document.getElementById("ed"+Object.values(r)[i]) !==null){
                       const element = document.getElementById("ed"+Object.values(r)[i]);
                        element.remove(); 
                       
                              }
                        }*/
                    
                for(let i=0;i<Object.values(r).length;i++){
                   conta+=1;
                   
                    
                      const para = document.createElement("input");
                    para.setAttribute("class","form-control");
                    para.setAttribute("type","text");
                     para.setAttribute("id","ed"+Object.values(r)[i]);
                  para.value = Object.values(r)[i];
                  document.getElementById("contenido").appendChild(para);
                  if(conta===10){
                      
                       const para = document.createElement("br");
                        document.getElementById("contenido").appendChild(para);
                        conta=0;
                   }
                  
                }
                                  
                                }
                         }
                    });
     
     
     
 }
 function borrar(){
     
      //if(document.getElementsByTagName("br")!==null || document.getElementsByTagName("input")!==null || document.getElementsByTagName("table") !==null){
        
        
                  for(let i=1;i<15;i++){
                      if(document.getElementById("idedu1")!==null){
                          document.getElementById("idedu1").remove();
                      }
                      if(document.getElementById("idcon1")!==null){
                          document.getElementById("idcon1").remove();
                      }
                      if(document.getElementById("idexp1")!==null){
                          document.getElementById("idexp1").remove();
                      }
                      if(document.getElementById("id"+i) !== null){
                      document.getElementById("id"+i).remove();
                      }
                  if(document.getElementById("thea"+i) !== null){    
                 document.getElementById("thea"+i).remove();
                  }
                  if(document.getElementById("tr1"+i) !== null){
                 document.getElementById("tr1"+i).remove();
                  }
                if(document.getElementById("th1"+i) !== null){ 
                document.getElementById("th1"+i).remove();
                    }
                 if(document.getElementById("tdb"+i) !== null){   
                 document.getElementById("tbd"+i).remove();
                }
                if(document.getElementById("tr2"+i) !== null){
                 document.getElementById("tr2"+i).remove();
                }
                if(document.getElementById("th2"+i) !== null){
                  document.getElementById("th2"+i).remove();
                }
                if(document.getElementById("td"+i) !== null){
                   document.getElementById("td"+i).remove();
               }
                  }
     while(document.getElementsByTagName("table").lenght){
         document.getElementsByTagName("table")[0].parentNode.removeChild(document.getElementsByTagName("table")[0]);
     }
     while(document.getElementsByTagName("tbody").lenght){
         document.getElementsByTagName("tbody")[0].parentNode.removeChild(document.getElementsByTagName("tbody")[0]);
     }
      while(document.getElementsByTagName("tr").lenght){
         document.getElementsByTagName("tr")[0].parentNode.removeChild(document.getElementsByTagName("tr")[0]);
     }
      while(document.getElementsByTagName("th").lenght){
         document.getElementsByTagName("th")[0].parentNode.removeChild(document.getElementsByTagName("th")[0]);
     }
      while(document.getElementsByTagName("td").lenght){
         document.getElementsByTagName("td")[0].parentNode.removeChild(document.getElementsByTagName("td")[0]);
     }
      while(document.getElementsByTagName("thead").lenght){
         document.getElementsByTagName("thead")[0].parentNode.removeChild(document.getElementsByTagName("thead")[0]);
     }
     var inpT=document.getElementsByTagName("input");
      while (inpT.length) {
                                inpT[0].parentNode.removeChild(inpT[0]);
         }
      var brs = document.getElementsByTagName("br");
                             while (brs.length) {
                                brs[0].parentNode.removeChild(brs[0]);
                              }
                        var rdiv=document.getElementsByTagName("div");
                    //let conta=0;
                    while (rdiv.length) {
                                if( rdiv[4] !== undefined){
                                        rdiv[4].parentNode.removeChild(rdiv[4]);
                                    }else{
                                        return;
                                    }
                              }
                  
                        if(document.getElementById("donus1") !==null){
                        document.getElementById("donus1").remove();
                        }
                        if(document.getElementById("donus7") !==null){
                        document.getElementById("donus7").remove();
                        }
                        
      
                    var rli = document.getElementsByTagName("li");
                             while (rli.length) {
                                 if(rli[5] !== undefined){
                                rli[5].parentNode.removeChild(rli[5]);
                            }else{return;}
                              }
                              var rul = document.getElementsByTagName("ul");
                             while (rul.length) {
                                 if(rul[1]!==undefined){
                                rul[0].parentNode.removeChild(rul[0]);
                            }else{return;}
                              }
                              var rp = document.getElementsByTagName("p");
                             while (rp.length) {
                                rp[0].parentNode.removeChild(rp[0]);
                              }
                              var rh = document.getElementsByTagName("h2");
                             while (rh.length) {
                                rh[0].parentNode.removeChild(rh[0]);
                              }
                              var rsp = document.getElementsByTagName("span");
                             while (rsp.length) {
                                rsp[0].parentNode.removeChild(rsp[0]);
                              }
                                var rsps = document.getElementsByTagName("table");
                                console.log(rsps.length);
                             while (rsps.length) {
                                rsps[0].parentNode.removeChild(rsps[0]);
                              }
                                 var rspss = document.getElementsByTagName("thead");
                             while (rspss.length) {
                                rspss[0].parentNode.removeChild(rspss[0]);
                              }
                                  var rspsss = document.getElementsByTagName("tr");
                             while (rspsss.length) {
                                rspsss[0].parentNode.removeChild(rspsss[0]);
                              }
                                   var rspssst = document.getElementsByTagName("th");
                             while (rspssst.length) {
                                rspssst[0].parentNode.removeChild(rspssst[0]);
                              }
                                     var rspssstt = document.getElementsByTagName("td");
                             while (rspssstt.length) {
                                rspssstt[0].parentNode.removeChild(rspssstt[0]);
                              }
                              
       //}
 }
 function ConocReload(){
     borrar();
      let ag=0;
      let agga=0;
     let con=0;
     let edi,sobre,de,saber,personaid,d,f,g,h,i,j,k,l,m,cuelen;
     fetch('/conoc/traer', {
        method: 'GET',
          headers: (
        {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': localStorage.getItem('au_token')
        }
       )
        
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
                if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
                 
               let rr=Object.values(res);
           
      let conta=0;
      let cuenta=0;
      let cont=0;
      
        for(let r of rr){
             conta+=1;
           
            
            
            //alert(JSON.stringify(r));
             if(r === '[' ||  r === ']' ){
                // alert("soy r "+r);
                 
             }else{
                
                 
                        if (conta<=1){
                    const para = document.createElement("table");
                    para.setAttribute("class","table table-dark table-striped");
                     para.setAttribute("id","idcon"+conta);
                  document.getElementById("contenido").appendChild(para);
                  const para2 = document.createElement("thead");
                     para2.setAttribute("id","thea"+conta);
                  document.getElementById("idcon"+conta).appendChild(para2);
                  const para3 = document.createElement("tr");
                     para3.setAttribute("id","tr1"+conta);
                  document.getElementById("thea"+conta).appendChild(para3);
                  
                  for(let i=0; i<=5;i++){
                      const para4 = document.createElement("th");
                  para4.setAttribute("scope","col");
                     para4.setAttribute("id","th1"+conta);
                     if(i===0){
                     para4.innerHTML="id";
                    }
                    if(i===1){
                     para4.innerHTML="Sobre";
                    }
                    if(i===2){
                     para4.innerHTML="De";
                    }
                    if(i===3){
                     para4.innerHTML="Saber";
                    }
                    if(i===4){
                     para4.innerHTML="Persona Id";
                    }
                   
                    
                    
                  document.getElementById("tr1"+conta).appendChild(para4);
                }
                 }
                 const para5 = document.createElement("tbody");
                     para5.setAttribute("id","tbd"+conta);
                  document.getElementById("idcon"+1).appendChild(para5);
                  const para6 = document.createElement("tr");
                     para6.setAttribute("id","tr2"+conta);
                  document.getElementById("tbd"+conta).appendChild(para6);
                  const para7 = document.createElement("th");
                     para7.setAttribute("scope","row");
                     para7.setAttribute("id","th2"+conta);
                     para7.innerHTML=r.id;
                  document.getElementById("tr2"+conta).appendChild(para7);
                  const putt=document.createElement("th");
                    putt.setAttribute("scope","row");
                     putt.setAttribute("id","thh2"+conta);
                     putt.setAttribute("hidden","true");
                     putt.innerHTML=r.id;
                  document.getElementById("tr2"+conta).appendChild(putt);
                let o=0;
                    for(let i=0;i<Object.values(r).length;i++){
                   
                   
                if(i>0){
                    o=i;
                    
                  
              }
          }
          localStorage.setItem("o",o);
               
                for(let i=0;i<Object.values(r).length;i++){
                      con+=1;
                        cont+=1;
                       let resuu= document.getElementsByTagName("td").length/parseInt(localStorage.getItem("o"));
                   
                   
                 if(i>0){
                     
                  const para8 = document.createElement("td");
                  
                      para8.setAttribute("id","td"+conta+"p"+con);
                  localStorage.setItem("con",con);
                                para8.innerHTML=Object.values(r)[i];
                  document.getElementById("tr2"+conta).appendChild(para8);
                  localStorage.setItem("posicion",conta);
              }
             
               if (cont===4){
                   ag=conta;
                   agga=con;
               }
              //Grafico
     
       if(cont===5){
           cuelen+=1;
          
          
          
           localStorage.setItem("lengh",con);
           
           d=conta;
           f=con-3;
           
           
           g=d+1;
           h=g+1;
           j=h+1;
           k=f+1;
           l=k+1;
           m=l+1;
           edi=document.getElementById("th2"+d).innerHTML;
           sobre=document.getElementById("td"+d+"p"+f).innerHTML;
           de=document.getElementById("td"+d+"p"+k).innerHTML;
           saber=document.getElementById("td"+d+"p"+l).innerHTML;
           personaid=document.getElementById("td"+d+"p"+m).innerHTML;   //d,fklm
                        cuenta+=1;
                       const parat=document.createElement("input");
                       parat.setAttribute("id","ext"+r.de);
                       parat.setAttribute("style","background: #7092f0;");
                       parat.setAttribute("oninput","ValorRanT2("+r.saber+","+"'"+r.sobre+"'"+","+"'"+r.de+"'"+","+cuenta+","+ag+","+agga+")");
                       //parat.setAttribute("data-id","ex1RangePicker");
                       parat.setAttribute("type","range");
                       parat.value=r.saber;
                        document.getElementById("tr2"+conta).appendChild(parat);
                        const parats=document.createElement("div");
                       parats.setAttribute("id","demo"+r.de);
                       parats.innerHTML=r.saber;
                        document.getElementById("tr2"+conta).appendChild(parats);
                         const paras = document.createElement("br");
                        paras.setAttribute("id","br4"+cuenta);
                        document.getElementById("tr2"+conta).appendChild(paras);
                         const parass = document.createElement("div");
                        parass.setAttribute("id","div"+cuenta);
                        document.getElementById("tr2"+conta).appendChild(parass);
                        Grafico(r.saber,r.sobre,r.de,cuenta);
                        
                         const parasst = document.createElement("input");
                        parasst.setAttribute("id","inpt"+cuenta);
                        parasst.setAttribute("type","button");
                        parasst.setAttribute("class","btn btn-primary");//edi,sobre,de,saber,personaid d,fklm
                        parasst.setAttribute("onclick","Edit2("+d+","+f+","+k+","+l+","+m+")");
                        parasst.value="Aplicar";
                        document.getElementById("div"+cuenta).appendChild(parasst);
                        
                        const para = document.createElement("br");
                        para.setAttribute("id","br4"+cuenta+1);
                        document.getElementById("tr2"+conta).appendChild(para);
                        
                       cont=0;
                   }
        
                  
                  
                  
                }
                                  
                                }
                         }
                    });
     
 }
 function Conocimiento(){
     
  borrar();
      fetch('/conoc/traer', {
        method: 'GET',
          headers: (
        {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': localStorage.getItem('au_token')
        }
       )
        
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
                if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
                 console.log(res);
               let rr=Object.values(res);
           
      let conta=0;
      let cuenta=0;
      let cont=0;
        for(let r of rr){
            console.log(Object.values(r).length)
            
            //alert(JSON.stringify(r));
             if(r === '[' ||  r === ']' ){
                // alert("soy r "+r);
                 
             }else{
                 
                 
                       /*  for(let i=0;i<Object.values(r).length;i++){
                             if(document.getElementById("ed"+Object.values(r)[i]) !==null){
                       const element = document.getElementById("ed"+Object.values(r)[i]);
                        element.remove(); 
                       
                              }
                        }*/
                    
                for(let i=0;i<Object.values(r).length;i++){
                   conta+=1;
                   
                    
                      const para = document.createElement("input");
                    para.setAttribute("class","form-control");
                    para.setAttribute("type","text");
                     para.setAttribute("id","cn"+ Object.values(r)[i]);
                  para.value = Object.values(r)[i];
                  document.getElementById("contenido").appendChild(para);
              
     
       
        
       
                   // <input id="ext" data-id='ex1RangePicker' oninput="ValorRanT()"  type="range" data-min="0" data-max="20" data-step="1" data-value="0" />
            //<div id="demo"></div>
                  
                  if(conta===5){
                        cuenta+=1;
                       const parat=document.createElement("input");
                       parat.setAttribute("id","ext"+r.de);
                       parat.setAttribute("oninput","ValorRanT("+r.saber+","+"'"+r.sobre+"'"+","+"'"+r.de+"'"+","+cuenta+")");
                       parat.setAttribute("data-id","ex1RangePicker");
                       parat.setAttribute("type","range");
                       parat.value=r.saber;
                        document.getElementById("contenido").appendChild(parat);
                        const parats=document.createElement("div");
                       parats.setAttribute("id","demo"+r.de);
                       parats.innerHTML=r.saber;
                        document.getElementById("contenido").appendChild(parats);
                         const paras = document.createElement("br");
                        paras.setAttribute("id","br4"+cuenta);
                        document.getElementById("contenido").appendChild(paras);
                         const parass = document.createElement("div");
                        parass.setAttribute("id","div"+cuenta);
                        document.getElementById("contenido").appendChild(parass);
                        Grafico(r.saber,r.sobre,r.de,cuenta);
                        
                         const parasst = document.createElement("input");
                        parasst.setAttribute("id","inpt"+cuenta);
                        parasst.setAttribute("type","button");
                        parasst.setAttribute("class","btn btn-primary");
                        parasst.setAttribute("onclick","Edit("+r.id+","+"'"+r.sobre+"'"+","+"'"+r.de+"'"+","+r.saber+","+r.persona_id+")");
                        parasst.value="Aplicar";
                        document.getElementById("div"+cuenta).appendChild(parasst);
                        
                        const para = document.createElement("br");
                        para.setAttribute("id","br4"+cuenta+1);
                        document.getElementById("contenido").appendChild(para);
                        
                        conta=0;
                   }
                  
                }
                                  
                                }
                         }
                    });
     
    
     
 }
   function EditEdu(d,f,k,l,m,dd,ff,kk,ll,mm){
      if(localStorage.getItem("agregar")==='1'){
          let id=0;   
     // let edis=document.getElementById("th2"+d).innerHTML;   
    let id_persona=document.getElementById("td"+d+"p"+f).innerHTML;
    let principal=document.getElementById("td"+d+"p"+k).innerHTML;
    let segunda=document.getElementById("td"+d+"p"+l).innerHTML;
    let url_logo=document.getElementById("td"+d+"p"+m).innerHTML;
    let urlinst=document.getElementById("td"+d+"p"+dd).innerHTML;
    let anoinic=document.getElementById("td"+d+"p"+ff).innerHTML;
    let anofin=document.getElementById("td"+d+"p"+kk).innerHTML;
    let titulo=document.getElementById("td"+d+"p"+ll).innerHTML;
   
     let persona_id=document.getElementById("td"+d+"p"+mm).innerHTML;
   
    
     let addjs={id,id_persona,principal,segunda,url_logo,urlinst,anoinic,anofin,titulo,persona_id};
    console.log(JSON.stringify(addjs)); 
    
        fetch('/educacion/crear/', {
                                                          method: 'POST',
                                                            headers: (
                                                          {
                                                            'Content-Type': 'application/json',
                                                            'Authorization': localStorage.getItem('au_token')
                                                          }
                                                         ),
                                                         
                                                         // body:{title: 'Angular POST Request Example'}
                                                          body: JSON.stringify(addjs)
                                                              })
                                                             .then(res => res)
                                                             .then(res=> { console.log(res);
                                                               if(res.status ===200){
                                                                   localStorage.removeItem("agregar");
                                                                    console.log("200");
                                                                    EducReload();
                                                                    Swal.fire('Agregado!', '', 'success')
                                                                }
                                                                
                                                                // alert("se Agrego correctamente");
                                                             });
        return;
     
      }
      let edis=document.getElementById("thh2"+d).innerHTML;   
    let idPersonas=document.getElementById("td"+d+"p"+f).innerHTML;
    let principal=document.getElementById("td"+d+"p"+k).innerHTML;
    let segunda=document.getElementById("td"+d+"p"+l).innerHTML;
    let urllogo=document.getElementById("td"+d+"p"+m).innerHTML;
    let urlinst=document.getElementById("td"+d+"p"+dd).innerHTML;
    let anoinic=document.getElementById("td"+d+"p"+ff).innerHTML;
    let anofin=document.getElementById("td"+d+"p"+kk).innerHTML;
    let titulo=document.getElementById("td"+d+"p"+ll).innerHTML;
     let idpersona=document.getElementById("td"+d+"p"+mm).innerHTML;
     console.log("edis "+edis+" "+idPersonas+" "+ principal+" "+segunda+" "+urllogo+" "+urlinst+" "+anoinic+" "+anofin+" "+titulo+" "+ idpersona);
     
 fetch('/educacion/editar/'+edis+'?principal='+principal
    +'&segunda='+segunda
    +'&personaid='+idPersonas
    +'&urllogo='+urllogo
    +'&urlinst='+urlinst
    +'&anoinic='+anoinic
    +'&anofin='+anofin
    +'&titulo='+titulo
    +'&persona_id='+idpersona, {
        method: 'PUT',
          headers: (
        {
          'Content-Type': 'application/json',
          'Authorization': localStorage.getItem('au_token')
        }
       ),
        body:{title: 'Angular PUT Request Example'}
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
                
              console.log(res);
               
             });
 }
  function Edit2(d,f,k,l,m){
      if(localStorage.getItem("agregar")==='1'){
          let id=0;   
     let persona_id = document.getElementById("td"+d+"p"+m).innerHTML;
     let sobre= document.getElementById("td"+d+"p"+f).innerHTML;
     let de=document.getElementById("td"+d+"p"+k).innerHTML;
     let saber=document.getElementById("td"+d+"p"+l).innerHTML;
     
     let addjs={id,sobre,de,saber,persona_id};
        fetch('/conoc/crear/', {
                                                          method: 'POST',
                                                            headers: (
                                                          {
                                                            'Content-Type': 'application/json',
                                                            'Authorization': localStorage.getItem('au_token')
                                                          }
                                                         ),
                                                         
                                                         // body:{title: 'Angular POST Request Example'}
                                                          body: JSON.stringify(addjs)
                                                              })
                                                             .then(res => res)
                                                             .then(res=> { console.log(res);
                                                               if(res.status ===200){
                                                                   localStorage.removeItem("agregar");
                                                                    console.log("200");
                                                                    ConocReload();
                                                                    Swal.fire('Agregado!', '', 'success')
                                                                }
                                                                
                                                                // alert("se Agrego correctamente");
                                                             });
        return;
     
      }
      let edis=document.getElementById("thh2"+d).innerHTML;   
     let personaids = document.getElementById("td"+d+"p"+m).innerHTML;
     let sobres= document.getElementById("td"+d+"p"+f).innerHTML;
     let des=document.getElementById("td"+d+"p"+k).innerHTML;
     let sabers=document.getElementById("td"+d+"p"+l).innerHTML;
 fetch('/conoc/editar/'+edis+'?personaid='+personaids+'&sobre='+sobres+'&de='+des+'&saber='+sabers, {
        method: 'PUT',
          headers: (
        {
          'Content-Type': 'application/json',
          'Authorization': localStorage.getItem('au_token')
        }
       ),
        body:{title: 'Angular PUT Request Example'}
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
                if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
                 
              console.log(res);
               ConocReload();
             });
 }
 function Edit(edi,sobre,de,saber,personaid){
     let personaids = document.getElementById("cn"+personaid).value;
     let sobres= document.getElementById("cn"+sobre).value;
     let des=document.getElementById("cn"+de).value;
     let sabers=document.getElementById("cn"+saber).value;
 fetch('/conoc/editar/'+edi+'?personaid='+personaids+'&sobre='+sobres+'&de='+de+'&saber='+sabers, {
        method: 'PUT',
          headers: (
        {
          'Content-Type': 'application/json',
          'Authorization': localStorage.getItem('au_token')
        }
       ),
        body:{title: 'Angular PUT Request Example'}
        /*body: JSON.stringify({ mail: 'ññññ', password: 'ññññ' })*/
            })
           .then(res => res.json())
           .then(res=> {
                if(res.status===403){
                     window.location.assign("/")
                     return;
                 }
               alert("Se Modifico correctamente");
               Conocimiento();
             });
 }
 function borrarAd(cuenta){
      if ( document.getElementById("donus"+cuenta) !==null){
         var rmdiv= document.getElementById("donus"+cuenta);
         rmdiv.remove();
        }
      
        var p1=document.getElementById("p"+cuenta);
        if(p1 !==null){
        p1.remove();
        }
         var p2=document.getElementById("p2"+cuenta);
         if(p2 !==null){
        p2.remove();
        }
   
         var p3=document.getElementById("p3"+cuenta);
         if(p3 !==null){
        p3.remove();
        }
       
         var p4=document.getElementById("p4"+cuenta);
         if(p4 !==null){
        p4.remove();
        }
       if(document.getElementById("span"+cuenta) !== null){
        document.getElementById("span"+cuenta).remove;
         }
                  if(document.getElementById("donut-chart"+cuenta)!==null){
                       document.getElementById("donut-chart"+cuenta).remove;
                  }
            if(  document.getElementById("titular"+cuenta) !==null){
             document.getElementById("titular"+cuenta).remove;
                 }
         if(document.getElementById("br"+cuenta) !== null){
          document.getElementById("br"+cuenta).remove;
      }
             if(document.getElementById("porcion11"+cuenta) !==null){
         document.getElementById("porcion11"+cuenta).remove;
     }
         if(document.getElementById("porcion22"+cuenta) !==null){
          document.getElementById("porcion22"+cuenta).remove;
          }
             if(document.getElementById("ques"+cuenta) !==null){
          document.getElementById("ques"+cuenta).remove;
      }
             if(document.getElementById("ques2"+cuenta) !==null){
           document.getElementById("ques2"+cuenta).remove;
       }
           
        if(document.getElementById("ios"+cuenta) !==null){
        document.getElementById("ios"+cuenta).remove;
        }
        if(document.getElementById("mac"+cuenta) !==null){
        document.getElementById("mac"+cuenta).remove;
        }
             if(document.getElementById("porcion1"+cuenta) !==null){
        document.getElementById("porcion1"+cuenta).remove;
        }
                if(document.getElementById("porcion2"+cuenta) !==null){
        document.getElementById("porcion2"+cuenta).remove;
        }
            
                     if(document.getElementById("center-date"+cuenta) !==null){
        document.getElementById("center-date"+cuenta).remove;
        }
              
                      if( document.getElementById("ul"+cuenta) !==null){
        document.getElementById("ul"+cuenta).remove;
        }
                        
          
                         if( document.getElementById("li"+cuenta) !==null){
        document.getElementById("li"+cuenta).remove;
        }
       
                           if( document.getElementById("li2"+cuenta) !==null){
        document.getElementById("li2"+cuenta).remove;
        }
                     
                 
 }
   function ValorRanT2(saber,sobre,de,cuenta,ag,agga){
  var slider = document.getElementById("ext"+de);
  var output = document.getElementById("demo"+de);
   
  if(output !== null){
  output.innerHTML = slider.value; 
  document.getElementById("td"+ag+"p"+agga).innerHTML= slider.value;
   saber = parseInt(slider.value);
   
  
    borrarAd(cuenta);
   let menu = document.getElementById("br4"+cuenta);
  Grafico(saber,sobre,de,cuenta);
   
 

  }

function insertAfter(newNode, existingNode) {
    if(existingNode !==null){
            existingNode.parentNode.insertBefore(newNode, existingNode.nextSibling);
       }
    }
 
 
}
  function ValorRanT(saber,sobre,de,cuenta){
  var slider = document.getElementById("ext"+de);
  var output = document.getElementById("demo"+de);
   
  if(output !== null){
  output.innerHTML = slider.value; 
  document.getElementById("cn"+saber).value= slider.value;
   saber = parseInt(slider.value);
   
  
    borrarAd(cuenta);
   let menu = document.getElementById("br4"+cuenta);
  Grafico(saber,sobre,de,cuenta);
   
 

  }

function insertAfter(newNode, existingNode) {
    if(existingNode !==null){
            existingNode.parentNode.insertBefore(newNode, existingNode.nextSibling);
       }
    }
 
 
}
function tokenVal(){
     if (localStorage.getItem('veritok')!==null){
         let tokenexp=parseInt(localStorage.getItem('veritok'));
       
         if (tokenexp < (new Date().getTime() + 1) / 1000){
             Salir();
             tiempos();
         }
     }
 }
 var inter=  setInterval(() => {tokenVal();},10000);
 function tiempos(){
     
  clearInterval(inter);
    Swal.fire({
      
     title: 'Extender secion',
     text: "La seción caduco,¿desea extenderla?",
     icon: 'warning',
     showCancelButton: true,
     confirmButtonColor: '#3085d6',
     cancelButtonColor: '#d33',
     confirmButtonText: 'Si, extender!'
   }).then((result) => {
   
     if (result.isConfirmed) {
      
      clearInterval(inter);
       if(localStorage.getItem('au_usr') !==null){
           let user="";
           let password="";
            user=localStorage.getItem('au_usr');
           password=localStorage.getItem('au_passw');
           let jaason={user,password};
           console.log(jaason);
           
           const params = new URLSearchParams();
            params.set('user', user);
            params.set('password',password);
           fetch('/user', {
                       method: 'POST',
                       /*  headers: (
                          {
                                'Content-Type': 'application/json'//x-www-form-urlencoded
                                 //'Authorization': localStorage.getItem('au_token')
                             }
                            ),*/
                                                         
                           // body:{title: 'Angular POST Request Example'}
                           body:params
                        //body: JSON.stringify({user:"pablocon87@gmail.com",password:"Pipolo$$5323"})
                            })
                        .then(res => res.json())
                          .then(res=> { console.log(res);
                          console.log("TOKEN"+res.token);
                          setInterval(inter);
                       localStorage.setItem('au_token',res.token);
                       localStorage.setItem("veritok",parseJwt(localStorage.getItem('au_token')).exp);
                             if(res.status ===200){
                                 console.log("TOKEN"+res.token);
                          setInterval(inter);
                       localStorage.setItem('au_token',res.token);
                       localStorage.setItem("veritok",parseJwt(localStorage.getItem('au_token')).exp);
                             console.log("200");
                             
                           
                            }
                                                                
                                                                // alert("se Agrego correctamente");
                });
        
       }else{
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: 'Caduco La Secion!',
          footer: 'Ingresa nuevamente!'
        });
        return;
       }
   };
   });
 }
 function Salir(){
                   var xmlHttp = new XMLHttpRequest();
               var decryptedrol = CryptoJS.AES.decrypt(localStorage.getItem("au_rol"), "Secret Passphrase");
               var decryptedid = CryptoJS.AES.decrypt(localStorage.getItem("au_id"), "Secret Passphrase");
                 var length= 0;
                 Object.values(decryptedrol);
                  Object.values(decryptedid);
              /*  for(var key in decryptedrol) {
                    if(decryptedrol.hasOwnProperty(key)){
                        length++;
                    }
                }*/
               
                 var lengths= 0;
                for(var key in decryptedid) {
                    if(decryptedid.hasOwnProperty(key)){
                        lengths++;
                    }
                }
               
                for(let i=0;i<Object.values(decryptedrol).length;i++){
                   decryptedrol= Object.values(decryptedrol)[1];
                }
                 for(let i=0;i<Object.values(decryptedid).length;i++){
                   decryptedid= Object.values(decryptedid)[1];
                }
               
                let ids=decryptedid;
                let usr=localStorage.getItem("au_usr");
                let passw=localStorage.getItem("au_passw");
                let rol =decryptedrol;
                
                 xmlHttp.open('PUT','/user/editar/'+ids+'?user='+usr+'&password='+passw+'&token=0'+'&expired='+0+'&conec='+0+'&auten='+1+'&timelim=0'+'&rol='+rol);
               xmlHttp.setRequestHeader('Content-Type', 'application/json');
               //xmlHttp.setRequestHeader('Authorization', localStorage.getItem('au_token'));
               xmlHttp.send();
                xmlHttp.onreadystatechange = function() {
                        if (this.readyState === 4 && this.status === 200) {
                           
                                           
                          //window.location.assign("/viewf");
                         }
                         };
               
            }
        </script> 
    <script src="static/js/aes.js" th:src="@{/js/aes.js}"></script> 
    </body>
</html>
